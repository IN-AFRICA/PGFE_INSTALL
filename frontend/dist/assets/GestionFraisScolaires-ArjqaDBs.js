import{d as Ee,A as F,r as O,p as P,am as Re,v as Ce,a3 as Ue,x as h,i as t,B as Pe,w as l,f as s,C as je,D as ze,c as _,t as m,E as Ie,J as z,b as o,y as u,G as J,F as ke,o as c,h as v,s as $,q as de,k as V,K as ce,L as fe,M as me,N as pe,O as _e,g as ge,z as E,a4 as Q,P as ve}from"./index-CJ_PivE-.js";import{_ as Ge}from"./ComptaLayout.vue_vue_type_script_setup_true_lang-Bu3Oqdii.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-B9adgRZV.js";import{_ as He,a as qe,b as G,c as T,d as Me,e as C}from"./TableHeader.vue_vue_type_script_setup_true_lang-cS4zBTGx.js";import{_ as Be}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-Bm461x8Q.js";import{_ as ye}from"./Checkbox.vue_vue_type_script_setup_true_lang-DTckireD.js";import{_ as Qe}from"./BoxPanelWrapper.vue_vue_type_script_setup_true_lang-CmJ-Iy6y.js";import{_ as xe}from"./ListCurrency.vue_vue_type_script_setup_true_lang-BPHzT41E.js";import{_ as he}from"./ListFeeType.vue_vue_type_script_setup_true_lang-DyY8dJdH.js";import{u as ee}from"./useGetApi-EdzHoZm6.js";import{u as Xe}from"./usePostApi-Crg8MURP.js";import{u as Je}from"./usePutApi-BrTvEW5v.js";import{u as Ke}from"./useDeleteApi-D2AjqV8w.js";import{o as We,aM as Y,s as X,a4 as Ye,an as Ze,av as Z,u as et,aQ as k,t as tt}from"./vee-validate-zod-Bra4yLtR.js";import"./DashPageHeader.vue_vue_type_script_setup_true_lang-DucYyTAx.js";import"./DashLayout.vue_vue_type_script_setup_true_lang-Ch2egXHm.js";import"./RightDashHeader.vue_vue_type_script_setup_true_lang-Bn3G870_.js";import"./index-BpkKmY4O.js";import"./RovingFocusGroup-BxePylpC.js";const at={key:0},st={key:1,class:"text-muted-foreground"},lt={class:"flex items-center justify-between w-full"},nt={key:0},ot={class:"text-sm text-gray-500 ml-2"},be=Ee({__name:"ListExchangeRate",props:{modelValue:{},placeholder:{default:"SÃ©lectionner un taux de change"},name:{}},emits:["update:modelValue"],setup(H,{emit:K}){const g=H,w=K,{data:y,loading:D,error:p,fetchData:x}=ee(F.GET_EXCHANGE_RATES),R=O(!0),b=P(()=>{const d=y.value;if(!d)return[];if(Array.isArray(d))return d.filter(i=>i&&i.is_active).map(i=>({...i,rate:Number(i.rate)}));if(Array.isArray(d==null?void 0:d.exchange_rates))return d.exchange_rates.filter(i=>i&&i.is_active).map(i=>({...i,rate:typeof i.rate=="string"?parseFloat(i.rate):Number(i.rate)}));if(Array.isArray(d==null?void 0:d.data))return d.data.filter(i=>i&&i.is_active).map(i=>({...i,rate:typeof i.rate=="string"?parseFloat(i.rate):i.rate}));if(d&&typeof d=="object"){const i=Object.values(d).filter(f=>f&&typeof f=="object"&&"id"in f&&f.is_active).map(f=>({...f,rate:typeof f.rate=="string"?parseFloat(f.rate):f.rate}));if(i.length>0)return i}return[]});Re(()=>{y.value&&(console.log("Exchange rates data:",y.value),console.log("Normalized exchange rates:",b.value)),p.value&&console.error("Exchange rate API error:",p.value)});const N=P(()=>g.modelValue===null||g.modelValue===void 0||g.modelValue===""?"":g.modelValue.toString()),q=P(()=>{var f;if(!g.modelValue||g.modelValue===""||g.modelValue==="null")return null;const d=Number(g.modelValue),i=b.value.find(S=>S.id===d);if(i){const S=((f=i.currency)==null?void 0:f.code)||"N/A",A=Number(i.rate),L=Number.isFinite(A)?A.toFixed(6):String(i.rate??"");return`${S} - ${L}`}return`ID: ${g.modelValue}`});P(()=>{if(!g.modelValue||g.modelValue==="")return null;const d=Number(g.modelValue);return b.value.find(i=>i.id===d)||null});function W(d){if(console.log("ListExchangeRate - updateValue called with:",d),d==="null"||d==="loading"||d==="error"||d==="empty"){console.log("ListExchangeRate - Setting empty value"),w("update:modelValue","");return}const i=(d==null?void 0:d.toString())||"";console.log("ListExchangeRate - Emitting new value:",i),w("update:modelValue",i)}return Ce(()=>{R.value&&x()}),Ue(()=>{R.value=!1}),(d,i)=>(c(),h(t(Pe),{"model-value":N.value,"onUpdate:modelValue":W},{default:l(()=>[s(t(je),null,{default:l(()=>[s(t(ze),{placeholder:H.placeholder},{default:l(()=>[q.value?(c(),_("span",at,m(q.value),1)):(c(),_("span",st,m(H.placeholder),1))]),_:1},8,["placeholder"])]),_:1}),s(t(Ie),null,{default:l(()=>[t(D)?(c(),h(t(z),{key:0,value:"loading",disabled:""},{default:l(()=>[...i[0]||(i[0]=[o("div",{class:"flex items-center gap-2"},[o("span",{class:"iconify hugeicons--loading-03 animate-spin"}),u(" Chargement des taux... ")],-1)])]),_:1})):t(p)?(c(),h(t(z),{key:1,value:"error",disabled:""},{default:l(()=>[...i[1]||(i[1]=[o("div",{class:"flex items-center gap-2 text-red-500"},[o("span",{class:"iconify hugeicons--alert-circle"}),u(" Erreur de chargement ")],-1)])]),_:1})):b.value.length===0?(c(),h(t(z),{key:2,value:"empty",disabled:""},{default:l(()=>[...i[2]||(i[2]=[u(" Aucun taux de change disponible ",-1)])]),_:1})):(c(),_(J,{key:3},[s(t(z),{value:"null"},{default:l(()=>[...i[3]||(i[3]=[u("Aucun taux",-1)])]),_:1}),(c(!0),_(J,null,ke(b.value,f=>(c(),_(J,{key:(f==null?void 0:f.id)||Math.random()},[f&&f.id?(c(),h(t(z),{key:0,value:String(f.id)},{default:l(()=>{var S,A,L;return[o("div",lt,[o("span",null,[u(m(((S=f.currency)==null?void 0:S.code)||"N/A"),1),(A=f.currency)!=null&&A.name?(c(),_("span",nt," - "+m((L=f.currency)==null?void 0:L.name),1)):v("",!0)]),o("span",ot,m(Number(f.rate).toFixed(6)),1)])]}),_:2},1032,["value"])):v("",!0)],64))),128))],64))]),_:1})]),_:1},8,["model-value"]))}}),rt={class:"flex items-center gap-3 justify-between mb-4"},it={class:"relative flex-1 max-w-md"},ut={class:"flex flex-wrap items-center gap-2.5"},dt={class:"space-y-4"},ct={class:"grid grid-cols-2 gap-6"},ft={class:"space-y-2"},mt={key:0,class:"text-sm text-red-500"},pt={class:"space-y-2"},_t={key:0,class:"text-sm text-red-500"},gt={class:"space-y-4"},vt={class:"grid grid-cols-2 gap-6"},yt={class:"space-y-2"},xt={key:0,class:"text-sm text-red-500"},ht={class:"space-y-2"},bt={key:0,class:"text-sm text-red-500"},Et={class:"space-y-4"},Ct={class:"space-y-2"},kt={key:0,class:"text-sm text-red-500"},wt={key:0,class:"iconify hugeicons--loading-03 animate-spin mr-2"},St={class:"rounded-md overflow-hidden flex flex-1 bg-white"},$t={class:"flex items-center justify-center gap-2"},Ft={class:"flex items-center justify-center gap-2"},At={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Vt={class:"text-sm font-medium text-blue-600"},Dt={class:"text-sm font-medium"},Nt={class:"flex items-center gap-2 w-max"},Lt={class:"space-y-4"},Tt={class:"grid grid-cols-2 gap-6"},Ot={class:"space-y-2"},Rt={key:0,class:"text-sm text-red-500"},Ut={class:"space-y-2"},Pt={key:0,class:"text-sm text-red-500"},jt={class:"space-y-4"},zt={class:"grid grid-cols-2 gap-6"},It={class:"space-y-2"},Gt={key:0,class:"text-sm text-red-500"},Ht={class:"space-y-2"},qt={key:0,class:"text-sm text-red-500"},Mt={class:"space-y-4"},Bt={class:"space-y-2"},Qt={key:0,class:"text-sm text-red-500"},Xt={key:0,class:"iconify hugeicons--loading-03 animate-spin mr-2"},pa=Ee({__name:"GestionFraisScolaires",setup(H){const K=We({amount:Ye.number().min(0,"Le montant doit Ãªtre positif"),currency_id:Y([X().refine(a=>a!=="","La devise est requise").transform(a=>Number(a)),Z()]).refine(a=>Number(a)>0,"La devise est requise"),fee_type_id:Y([X().refine(a=>a!=="","Le type de frais est requis").transform(a=>Number(a)),Z()]).refine(a=>Number(a)>0,"Le type de frais est requis"),effective_date:X().min(1,"La date d'effet est requise"),exchange_rate_id:Y([Ze(""),X().transform(a=>Number(a)),Z()]).optional().transform(a=>a===""?null:a)}),g=O("");O([]);const w=O(!1),y=O(!1),D=O(null),p=O([]),{data:x,loading:R,error:b,fetchData:N}=ee(F.GET_SCHOOL_FEES),{data:q,fetchData:W}=ee(F.GET_EXCHANGE_RATES),{postData:d,loading:i}=Xe(),{putData:f,loading:S}=Je(),{deleteItem:A,deleting:L}=Ke(),{handleSubmit:te,resetForm:ae,setValues:se}=et({validationSchema:tt(K)}),U=P(()=>{if(console.log("ðŸ” GestionFraisScolaires - filteredFees computed"),console.log("ðŸ“Š feesData.value:",x.value),console.log("âš ï¸ error.value:",b.value),console.log("â³ loading.value:",R.value),!x.value)return console.log("âŒ Pas de feesData.value"),[];if(!x.value.fees)return console.log("âŒ Pas de feesData.value.fees"),console.log("ðŸ“‹ Structure de feesData.value:",Object.keys(x.value)),[];if(console.log("âœ… DonnÃ©es trouvÃ©es:",x.value.fees.length,"frais"),console.log("ðŸ“ Premier frais:",x.value.fees[0]),!g.value)return x.value.fees;const a=g.value.toLowerCase(),e=x.value.fees.filter(n=>{var B,j,ie,ue;const r=n.student?`${n.student.firstname||""} ${n.student.name}`.trim().toLowerCase():"",M=((j=(B=n.student)==null?void 0:B.matricule)==null?void 0:j.toLowerCase())||"";return((ue=(ie=n.fee_type)==null?void 0:ie.name)==null?void 0:ue.toLowerCase().includes(a))||r.includes(a)||M.includes(a)});return console.log('ðŸ”Ž Recherche "'+a+'" - RÃ©sultats:',e.length),e}),we=a=>new Intl.NumberFormat("fr-CD",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),Se=a=>{var e;return((e=a.fee_type)==null?void 0:e.name)||"Non dÃ©fini"},$e=a=>{var e;return(e=a.currency)==null?void 0:e.code},Fe=a=>a?new Date(a).toLocaleDateString("fr-FR"):"-",Ae=P(()=>{const a=q.value,e=new Map;if(!a)return e;let n=[];return Array.isArray(a)?n=a:Array.isArray(a==null?void 0:a.exchange_rates)?n=a.exchange_rates:Array.isArray(a==null?void 0:a.data)?n=a.data:a&&typeof a=="object"&&(n=Object.values(a).filter(r=>r&&typeof r=="object"&&"id"in r)),n.forEach(r=>{var j;if(!r||!r.id)return;const M=Number(r.rate);if(!Number.isFinite(M))return;const B=(j=r.currency)==null?void 0:j.code;e.set(Number(r.id),{rate:M,code:B})}),e}),Ve=a=>{var e;if(a.exchange_rate&&typeof a.exchange_rate.rate<"u"){const n=((e=a.exchange_rate.currency)==null?void 0:e.code)||"N/A",r=Number(a.exchange_rate.rate);return`${n} ${Number.isFinite(r)?Math.round(r):""}`.trim()}if(a.exchange_rate_id){const n=Ae.value.get(Number(a.exchange_rate_id));if(n)return`${n.code||"N/A"} ${Math.round(n.rate)}`}return"-"},le=()=>{try{ae(),w.value=!1}catch(a){console.warn("Erreur lors de la fermeture du dialog de crÃ©ation:",a),w.value=!1}},ne=te(async a=>{console.log("ðŸš€ Form submission started"),console.log("ðŸ“ Form values:",a),console.log("ðŸ”— API Route:",F.CREATE_SCHOOL_FEE);try{console.log("ðŸ“¤ Sending data to API...");const e=await d(F.CREATE_SCHOOL_FEE,a);console.log("âœ… API Response:",e),$({message:"Frais scolaire crÃ©Ã© avec succÃ¨s",type:"success"}),le(),await N(),console.log("ðŸ”„ Data refreshed")}catch(e){console.error("âŒ Error during form submission:",e),$({message:"Erreur lors de la crÃ©ation du frais scolaire",type:"error"})}},a=>{console.log("âŒ Form validation errors:",a),$({message:"Veuillez corriger les erreurs dans le formulaire",type:"error"})}),oe=()=>{try{ae(),D.value=null,y.value=!1}catch(a){console.warn("Erreur lors de la fermeture du dialog:",a),y.value=!1,D.value=null}},re=te(async a=>{if(D.value)try{await f(F.UPDATE_SCHOOL_FEE(D.value.id),a),$({message:"Frais scolaire modifiÃ© avec succÃ¨s",type:"success"}),oe(),await N()}catch{$({message:"Erreur lors de la modification du frais scolaire",type:"error"})}}),De=a=>{var e,n,r;D.value=a,se({amount:a.amount,currency_id:((e=a.currency_id)==null?void 0:e.toString())||"",fee_type_id:((n=a.fee_type_id)==null?void 0:n.toString())||"",effective_date:a.effective_date.split("T")[0],exchange_rate_id:((r=a.exchange_rate_id)==null?void 0:r.toString())||""}),y.value=!0},Ne=async a=>{if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer ce frais scolaire ?"))try{await A(F.DELETE_SCHOOL_FEE(a)),$({message:"Frais scolaire supprimÃ© avec succÃ¨s",type:"success"}),await N()}catch{$({message:"Erreur lors de la suppression du frais scolaire",type:"error"})}},Le=a=>{const e=p.value.indexOf(a);e>-1?p.value.splice(e,1):p.value.push(a)},Te=()=>{p.value.length===U.value.length?p.value=[]:p.value=U.value.map(a=>a.id)},Oe=async()=>{if(p.value.length!==0&&confirm(`ÃŠtes-vous sÃ»r de vouloir supprimer ${p.value.length} frais scolaire(s) ?`))try{for(const a of p.value)await A(F.DELETE_SCHOOL_FEE(a));$({message:`${p.value.length} frais scolaire(s) supprimÃ©(s) avec succÃ¨s`,type:"success"}),p.value=[],await N()}catch{$({message:"Erreur lors de la suppression des frais scolaires",type:"error"})}};return Ce(async()=>{console.log("ðŸš€ GestionFraisScolaires - Chargement initial des donnÃ©es"),console.log("ðŸ”— API Route:",F.GET_SCHOOL_FEES);try{await Promise.all([N(),W()]),console.log("âœ… DonnÃ©es chargÃ©es:",x.value),console.log("âŒ Erreur:",b.value),console.log("â³ Loading:",R.value)}catch(a){console.error("ðŸ’¥ Erreur lors du chargement:",a)}}),de(w,a=>{a&&(y.value=!1,se({amount:0,currency_id:"",fee_type_id:"",effective_date:"",exchange_rate_id:""}))}),de(y,a=>{a&&(w.value=!1)}),(a,e)=>(c(),h(Ge,{activeBread:"Frais Scolaires","active-tag-name":"frais-scolaires",group:"frais"},{default:l(()=>[s(Qe,null,{default:l(()=>[o("div",rt,[o("div",it,[s(t(I),{type:"text",id:"search",name:"search",placeholder:"Rechercher un frais scolaire...",modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=n=>g.value=n),class:"pl-10"},null,8,["modelValue"]),e[5]||(e[5]=o("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground-muted/70"},[o("span",{class:"flex iconify hugeicons--search-01 text-sm"})],-1))]),o("div",ut,[p.value.length>0?(c(),h(t(V),{key:0,variant:"destructive",size:"md",onClick:Oe,disabled:t(L)},{default:l(()=>[e[6]||(e[6]=o("span",{class:"iconify hugeicons--delete-02 mr-2"},null,-1)),u(" Supprimer ("+m(p.value.length)+") ",1)]),_:1},8,["disabled"])):v("",!0),s(t(ce),{open:w.value,"onUpdate:open":e[2]||(e[2]=n=>w.value=n)},{default:l(()=>[s(t(Be),{"as-child":""},{default:l(()=>[s(t(V),{size:"md",class:"bg-primary text-primary-foreground"},{default:l(()=>[...e[7]||(e[7]=[o("span",{class:"iconify hugeicons--add-01 mr-2"},null,-1),o("span",{class:"hidden sm:flex"},"Nouveau Frais",-1)])]),_:1})]),_:1}),s(t(fe),{class:"sm:max-w-[600px]"},{default:l(()=>[s(t(me),null,{default:l(()=>[s(t(pe),null,{default:l(()=>[...e[8]||(e[8]=[u("CrÃ©er un nouveau frais scolaire",-1)])]),_:1}),s(t(_e),null,{default:l(()=>[...e[9]||(e[9]=[u(" Remplissez les informations du nouveau frais scolaire. ",-1)])]),_:1})]),_:1}),o("form",{onSubmit:e[1]||(e[1]=ge((...n)=>t(ne)&&t(ne)(...n),["prevent"])),class:"space-y-6"},[o("div",dt,[o("div",ct,[o("div",ft,[s(t(E),{for:"amount"},{default:l(()=>[...e[10]||(e[10]=[u("Montant ",-1)])]),_:1}),s(t(k),{name:"amount"},{default:l(({field:n,errorMessage:r})=>[s(t(I),Q({id:"amount"},n,{type:"number",placeholder:"0",step:"0.01",class:"w-full"}),null,16),r?(c(),_("span",mt,m(r),1)):v("",!0)]),_:1})]),o("div",pt,[s(t(E),{for:"currency_id"},{default:l(()=>[...e[11]||(e[11]=[u("Devise ",-1)])]),_:1}),s(t(k),{name:"currency_id"},{default:l(({field:n,errorMessage:r})=>[s(xe,{"model-value":n.value,"onUpdate:modelValue":n.onChange,placeholder:"SÃ©lectionner une devise"},null,8,["model-value","onUpdate:modelValue"]),r?(c(),_("span",_t,m(r),1)):v("",!0)]),_:1})])])]),o("div",gt,[o("div",vt,[o("div",yt,[s(t(E),{for:"fee_type_id"},{default:l(()=>[...e[12]||(e[12]=[u("Type de frais ",-1)])]),_:1}),s(t(k),{name:"fee_type_id"},{default:l(({field:n,errorMessage:r})=>[s(he,{"model-value":n.value,"onUpdate:modelValue":n.onChange,placeholder:"SÃ©lectionner un type"},null,8,["model-value","onUpdate:modelValue"]),r?(c(),_("span",xt,m(r),1)):v("",!0)]),_:1})]),o("div",ht,[s(t(E),{for:"exchange_rate_id"},{default:l(()=>[...e[13]||(e[13]=[u("Taux de change ",-1),o("span",{class:"text-gray-500 text-sm"},"- Optionnel",-1)])]),_:1}),s(t(k),{name:"exchange_rate_id"},{default:l(({field:n,errorMessage:r})=>[s(be,{"model-value":n.value,"onUpdate:modelValue":n.onChange,placeholder:"SÃ©lectionner un taux de change"},null,8,["model-value","onUpdate:modelValue"]),r?(c(),_("span",bt,m(r),1)):v("",!0)]),_:1})])])]),o("div",Et,[o("div",Ct,[s(t(E),{for:"effective_date"},{default:l(()=>[...e[14]||(e[14]=[u("Date d'effet ",-1)])]),_:1}),s(t(k),{name:"effective_date"},{default:l(({field:n,errorMessage:r})=>[s(t(I),Q({id:"effective_date"},n,{type:"date",class:"w-full"}),null,16),r?(c(),_("span",kt,m(r),1)):v("",!0)]),_:1})])]),s(t(ve),null,{default:l(()=>[s(t(V),{type:"button",variant:"outline",onClick:le},{default:l(()=>[...e[15]||(e[15]=[u(" Annuler ",-1)])]),_:1}),s(t(V),{type:"submit",disabled:t(i)},{default:l(()=>[t(i)?(c(),_("span",wt)):v("",!0),e[16]||(e[16]=u(" CrÃ©er ",-1))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])])]),o("div",St,[s(t(He),{class:"rounded-md bg-white"},{default:l(()=>[s(t(qe),null,{default:l(()=>[s(t(G),null,{default:l(()=>[s(t(T),{class:"w-[20px]"},{default:l(()=>[s(t(ye),{class:"bg-white scale-70",checked:p.value.length===U.value.length&&U.value.length>0,onClick:Te},null,8,["checked"])]),_:1}),s(t(T),null,{default:l(()=>[...e[17]||(e[17]=[u("Type de frais",-1)])]),_:1}),s(t(T),null,{default:l(()=>[...e[18]||(e[18]=[u("Montant",-1)])]),_:1}),s(t(T),null,{default:l(()=>[...e[19]||(e[19]=[u("Taux",-1)])]),_:1}),s(t(T),null,{default:l(()=>[...e[20]||(e[20]=[u("Devise",-1)])]),_:1}),s(t(T),null,{default:l(()=>[...e[21]||(e[21]=[u("Date d'effet",-1)])]),_:1}),s(t(T),null,{default:l(()=>[...e[22]||(e[22]=[u("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(t(Me),null,{default:l(()=>[t(R)?(c(),h(t(G),{key:0},{default:l(()=>[s(t(C),{colspan:10,class:"text-center py-8"},{default:l(()=>[...e[23]||(e[23]=[o("div",{class:"flex items-center justify-center gap-2"},[o("span",{class:"iconify hugeicons--loading-03 animate-spin"}),u(" Chargement des frais scolaires... ")],-1)])]),_:1})]),_:1})):t(b)?(c(),h(t(G),{key:1},{default:l(()=>[s(t(C),{colspan:10,class:"text-center py-8 text-red-500"},{default:l(()=>[o("div",$t,[e[24]||(e[24]=o("span",{class:"iconify hugeicons--alert-circle"},null,-1)),u(" Erreur lors du chargement : "+m(t(b)),1)])]),_:1})]),_:1})):U.value.length===0?(c(),h(t(G),{key:2},{default:l(()=>[s(t(C),{colspan:10,class:"text-center py-8 text-gray-500"},{default:l(()=>[o("div",Ft,[e[25]||(e[25]=o("span",{class:"iconify hugeicons--wallet-03"},null,-1)),u(" "+m(g.value?"Aucun frais trouvÃ© pour cette recherche":"Aucun frais scolaire configurÃ©"),1)])]),_:1})]),_:1})):(c(!0),_(J,{key:3},ke(U.value,n=>(c(),h(t(G),{key:n.id},{default:l(()=>[s(t(C),{class:"w-[40px]"},{default:l(()=>[s(t(ye),{class:"bg-white scale-70",checked:p.value.includes(n.id),onClick:r=>Le(n.id)},null,8,["checked","onClick"])]),_:2},1024),s(t(C),null,{default:l(()=>[o("span",At,m(Se(n)),1)]),_:2},1024),s(t(C),{class:"font-medium"},{default:l(()=>[u(m(we(n.amount)),1)]),_:2},1024),s(t(C),null,{default:l(()=>[o("span",Vt,m(Ve(n)),1)]),_:2},1024),s(t(C),null,{default:l(()=>[o("span",Dt,m($e(n)),1)]),_:2},1024),s(t(C),null,{default:l(()=>[u(m(Fe(n.effective_date)),1)]),_:2},1024),s(t(C),null,{default:l(()=>[o("div",Nt,[s(t(V),{variant:"outline",size:"icon",class:"size-8",onClick:r=>De(n),title:"Modifier le frais"},{default:l(()=>[...e[26]||(e[26]=[o("span",{class:"iconify hugeicons--edit-02"},null,-1)])]),_:1},8,["onClick"]),s(t(V),{variant:"destructive",size:"icon",class:"size-8",onClick:r=>Ne(n.id),title:"Supprimer le frais",disabled:t(L)},{default:l(()=>[...e[27]||(e[27]=[o("span",{class:"iconify hugeicons--delete-02"},null,-1)])]),_:1},8,["onClick","disabled"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),s(t(ce),{open:y.value,"onUpdate:open":e[4]||(e[4]=n=>y.value=n)},{default:l(()=>[s(t(fe),{class:"sm:max-w-[600px]"},{default:l(()=>[s(t(me),null,{default:l(()=>[s(t(pe),null,{default:l(()=>[...e[28]||(e[28]=[u("Modifier le frais scolaire",-1)])]),_:1}),s(t(_e),null,{default:l(()=>[...e[29]||(e[29]=[u(" Modifiez les informations du frais scolaire. ",-1)])]),_:1})]),_:1}),o("form",{onSubmit:e[3]||(e[3]=ge((...n)=>t(re)&&t(re)(...n),["prevent"])),class:"space-y-6"},[o("div",Lt,[e[32]||(e[32]=o("div",{class:"grid grid-cols-1 gap-4"},null,-1)),o("div",Tt,[o("div",Ot,[s(t(E),{for:"edit_amount"},{default:l(()=>[...e[30]||(e[30]=[u("Montant *",-1)])]),_:1}),s(t(k),{name:"amount"},{default:l(({field:n,errorMessage:r})=>[s(t(I),Q({id:"edit_amount"},n,{type:"number",placeholder:"0",step:"0.01",class:"w-full"}),null,16),r?(c(),_("span",Rt,m(r),1)):v("",!0)]),_:1})]),o("div",Ut,[s(t(E),{for:"edit_currency_id"},{default:l(()=>[...e[31]||(e[31]=[u("Devise *",-1)])]),_:1}),s(t(k),{name:"currency_id"},{default:l(({field:n,errorMessage:r})=>[s(xe,{"model-value":n.value,"onUpdate:modelValue":n.onChange,placeholder:"SÃ©lectionner une devise"},null,8,["model-value","onUpdate:modelValue"]),r?(c(),_("span",Pt,m(r),1)):v("",!0)]),_:1})])])]),o("div",jt,[o("div",zt,[o("div",It,[s(t(E),{for:"edit_fee_type_id"},{default:l(()=>[...e[33]||(e[33]=[u("Type de frais *",-1)])]),_:1}),s(t(k),{name:"fee_type_id"},{default:l(({field:n,errorMessage:r})=>[s(he,{"model-value":n.value,"onUpdate:modelValue":n.onChange,placeholder:"SÃ©lectionner un type"},null,8,["model-value","onUpdate:modelValue"]),r?(c(),_("span",Gt,m(r),1)):v("",!0)]),_:1})]),o("div",Ht,[s(t(E),{for:"edit_exchange_rate_id"},{default:l(()=>[...e[34]||(e[34]=[u("Taux de change ",-1),o("span",{class:"text-gray-500 text-sm"},"- Optionnel",-1)])]),_:1}),s(t(k),{name:"exchange_rate_id"},{default:l(({field:n,errorMessage:r})=>[s(be,{"model-value":n.value,"onUpdate:modelValue":n.onChange,placeholder:"SÃ©lectionner un taux de change"},null,8,["model-value","onUpdate:modelValue"]),r?(c(),_("span",qt,m(r),1)):v("",!0)]),_:1})])])]),o("div",Mt,[o("div",Bt,[s(t(E),{for:"edit_effective_date"},{default:l(()=>[...e[35]||(e[35]=[u("Date d'effet *",-1)])]),_:1}),s(t(k),{name:"effective_date"},{default:l(({field:n,errorMessage:r})=>[s(t(I),Q({id:"edit_effective_date"},n,{type:"date",class:"w-full"}),null,16),r?(c(),_("span",Qt,m(r),1)):v("",!0)]),_:1})])]),s(t(ve),null,{default:l(()=>[s(t(V),{type:"button",variant:"outline",onClick:oe},{default:l(()=>[...e[36]||(e[36]=[u(" Annuler ",-1)])]),_:1}),s(t(V),{type:"submit",disabled:t(S)},{default:l(()=>[t(S)?(c(),_("span",Xt)):v("",!0),e[37]||(e[37]=u(" Modifier ",-1))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1}))}});export{pa as default};
