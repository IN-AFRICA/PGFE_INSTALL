import{r,m as b}from"./index-CJ_PivE-.js";function E(){const n=r(!1),e=r(null),u=r(null),o=r(!1),t=r(null),c=r(null);return{loading:n,error:e,response:u,postData:async(i,f)=>{n.value=!0,e.value=null,u.value=null,o.value=!1,t.value=null,c.value=null;try{const s=await b.post(i,f);s.data&&typeof s.data=="object"&&"data"in s.data?u.value=s.data.data:u.value=s.data,o.value=!0,t.value=s.status}catch(s){const l=s;if(l.response){const v=l.response.status,a=l.response.data;switch(t.value=v,c.value=a,v){case 400:e.value="Requête invalide";break;case 401:e.value="Non autorisé";break;case 403:e.value="Accès refusé";break;case 422:if(a!=null&&a.errors){const d=Object.values(a.errors).flat();e.value=d.join(", ")}else e.value=(a==null?void 0:a.message)||"Données invalides";break;case 500:e.value="Erreur serveur interne";break;default:e.value=(a==null?void 0:a.message)||l.message||"Erreur lors de l'ajout"}}else l.request?e.value="Erreur de connexion":e.value=l.message||"Erreur inconnue"}finally{n.value=!1}},success:o,status:t,errorDetails:c}}export{E as u};
