import{r as l,m as f}from"./index-CJ_PivE-.js";function m(d){const u=l(null),o=l(!1),t=l(null),c=l({}),n=l(null),i=l(null);async function p(v={}){o.value=!0,t.value=null,c.value=v;try{const s=await f.get(d,{params:v});if(i.value=s.data,s.data&&typeof s.data=="object"&&"data"in s.data){const a=s.data;if(a.data&&typeof a.data=="object"&&"data"in a.data){const e=a.data;u.value=e.data,n.value={current_page:e.current_page,last_page:e.last_page,per_page:e.per_page,total:e.total,from:e.from,to:e.to,first_page_url:e.first_page_url,last_page_url:e.last_page_url,next_page_url:e.next_page_url,prev_page_url:e.prev_page_url,links:e.links}}else u.value=a.data,n.value=a.meta??null}else u.value=s.data,n.value=null}catch(s){const a=s;if(a.response){const e=a.response.status,r=a.response.data;switch(e){case 404:t.value="Ressource non trouvée";break;case 403:t.value="Accès refusé";break;case 422:t.value=(r==null?void 0:r.message)||"Données invalides";break;case 500:t.value="Erreur serveur interne";break;default:t.value=(r==null?void 0:r.message)||a.message||"Erreur API"}}else a.request?t.value="Erreur de connexion":t.value=a.message||"Erreur inconnue"}finally{o.value=!1}}return{data:u,loading:o,error:t,fetchData:p,refresh:async()=>{await p(c.value)},meta:n,lastResponseRaw:i}}export{m as u};
