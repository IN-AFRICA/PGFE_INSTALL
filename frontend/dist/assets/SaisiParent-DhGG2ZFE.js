import{d as A,A as w,x as h,w as a,f as s,b as n,c,i as t,$ as N,y as l,G as T,F as B,o,t as f,k as p,s as b}from"./index-CJ_PivE-.js";import{_ as D}from"./Input.vue_vue_type_script_setup_true_lang-B9adgRZV.js";import{_ as V,a as R,b as k,c as i,d as F,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-cS4zBTGx.js";import{_ as $}from"./Checkbox.vue_vue_type_script_setup_true_lang-DTckireD.js";import{_ as G}from"./LayoutSaisieOperation.vue_vue_type_script_setup_true_lang-bYPLg6Nt.js";import{_ as U}from"./BoxPanelWrapper.vue_vue_type_script_setup_true_lang-CmJ-Iy6y.js";import{u as I}from"./useGetApi-EdzHoZm6.js";import{u as L}from"./useSearch-uL6Ct-ER.js";import{u as M}from"./usePagination-BV0f67Jf.js";import{e as _}from"./eventBus-CGRXT3Tn.js";import{a as O}from"./AlertMessage.vue_vue_type_script_setup_true_lang-DthA28zY.js";import{u as q}from"./useDeleteApi-D2AjqV8w.js";import"./index-BpkKmY4O.js";import"./RovingFocusGroup-BxePylpC.js";import"./DashLayoutWithMode.vue_vue_type_script_setup_true_lang-DzpyZ4TL.js";import"./RightDashHeader.vue_vue_type_script_setup_true_lang-Bn3G870_.js";import"./DashPageHeader.vue_vue_type_script_setup_true_lang-DucYyTAx.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Bm461x8Q.js";const H={class:"flex items-center gap-3 justify-between"},J={class:"relative flex-1"},K={class:"flex flex-wrap items-center gap-2.5"},Q={key:0,class:"flex flex-col items-center justify-center py-10 bg-white rounded-md text-gray-500"},W={key:1,class:"mt-4 rounded-md overflow-hidden flex flex-1 bg-white"},X={class:"group flex items-center justify-between"},Y={class:"hidden group-hover:flex items-center gap-2 ml-2"},Z={key:2,class:"flex flex-col items-center justify-center py-10 bg-white rounded-md text-gray-500"},ye=A({__name:"SaisiParent",setup(ee){const{data:g,loading:C,fetchData:d}=I(w.GET_PARENTS),{errorDelete:v,deleteItem:P}=q();L(d,500);const{page:x,perPageCount:y}=M(d,1,5);d({page:x.value,limit:y.value}),_.on("parentUpdated",()=>{d({page:x.value,limit:y.value})});const S=m=>{_.emit("editParent",m)},E=async m=>{const e=w.DELETE_PARENT.replace(":parent",String(m));if(await P(e),_.emit("parentUpdated"),v.value){b({message:v.value,type:"error"});return}else b({message:"Fonction supprimée avec succès.",type:"success"})};return(m,e)=>{const j=N("NewParent");return o(),h(G,{"active-tag-name":"parent",group:"saisie"},{default:a(()=>[s(U,null,{default:a(()=>[n("div",H,[n("div",J,[s(t(D),{type:"text",id:"search",name:"search",placeholder:"Rechercher une classe...",class:"w-full max-w-sm ps-10 border border-gray-200/40 bg-white transition-all h-10 rounded-md"}),e[0]||(e[0]=n("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground-muted/70"},[n("span",{class:"flex iconify hugeicons--search-01 text-sm"})],-1))]),n("div",K,[s(j)])]),t(C)?(o(),c("div",Q,[...e[1]||(e[1]=[n("svg",{class:"animate-spin h-6 w-6 text-gray-400 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1),n("span",null,"Chargement des classes...",-1)])])):t(g).length?(o(),c("div",W,[s(t(V),{class:"rounded-md"},{default:a(()=>[s(t(R),null,{default:a(()=>[s(t(k),null,{default:a(()=>[s(t(i),{class:"w-[20px]"},{default:a(()=>[s(t($),{class:"bg-white scale-70"})]),_:1}),s(t(i),null,{default:a(()=>[...e[2]||(e[2]=[l(" Nom ",-1)])]),_:1}),s(t(i),null,{default:a(()=>[...e[3]||(e[3]=[l(" Postnom ",-1)])]),_:1}),s(t(i),null,{default:a(()=>[...e[4]||(e[4]=[l(" Prénom ",-1)])]),_:1}),s(t(i),null,{default:a(()=>[...e[5]||(e[5]=[l(" Téléphone ",-1)])]),_:1}),s(t(i),null,{default:a(()=>[...e[6]||(e[6]=[l(" Actions ",-1)])]),_:1})]),_:1})]),_:1}),s(t(F),null,{default:a(()=>[(o(!0),c(T,null,B(t(g),r=>(o(),h(t(k),{key:r.id},{default:a(()=>[s(t(u),{class:"w-[40px]"},{default:a(()=>[s(t($),{class:"bg-white scale-70"})]),_:1}),s(t(u),null,{default:a(()=>[l(f(r.name),1)]),_:2},1024),s(t(u),null,{default:a(()=>[l(f(r.firstname),1)]),_:2},1024),s(t(u),null,{default:a(()=>[l(f(r.lastname),1)]),_:2},1024),s(t(u),null,{default:a(()=>[l(f(r.phone_number),1)]),_:2},1024),s(t(u),null,{default:a(()=>[n("div",X,[e[10]||(e[10]=n("div",{class:"flex-1"},null,-1)),e[11]||(e[11]=n("button",{class:"ml-2 group-hover:hidden rounded-full size-8 flex items-center justify-center hover:bg-gray-100 transition"},[n("span",{class:"iconify hugeicons--more-vertical-circle-01"})],-1)),n("div",Y,[s(t(p),{variant:"ghost",size:"icon",class:"size-8 justify-center text-gray-500 hover:text-blue-600 hover:bg-blue-50",onClick:z=>S(r)},{default:a(()=>[...e[7]||(e[7]=[n("span",{class:"iconify hugeicons--edit-02"},null,-1)])]),_:1},8,["onClick"]),s(O,{action:"danger",title:"Supprimer un parent",message:`Vous êtes sur le point de supprimer le parent '${r.name} ${r.firstname}'. Êtes-vous sûr de continuer?`},{trigger:a(()=>[s(t(p),{variant:"ghost",size:"icon",class:"size-8 justify-center text-gray-500 hover:text-red-600 hover:bg-red-50"},{default:a(()=>[...e[8]||(e[8]=[n("span",{class:"iconify hugeicons--delete-02"},null,-1)])]),_:1})]),"confirm-action-button":a(()=>[s(t(p),{variant:"destructive",onClick:z=>E(r.id),size:"sm",class:"h-10 px-4"},{default:a(()=>[...e[9]||(e[9]=[l(" Oui, Supprimer ",-1)])]),_:1},8,["onClick"])]),_:2},1032,["message"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(o(),c("div",Z,[...e[12]||(e[12]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})],-1),n("span",null,"Aucune filière trouvée pour le moment.",-1)])]))]),_:1})]),_:1})}}});export{ye as default};
