import{u as E}from"./useGetApi-EdzHoZm6.js";import{d as S,A as $,p as m,am as w,v as D,x as s,i as n,B as I,w as o,f,C as B,D as L,c as d,t as p,E as T,J as i,b as g,y as c,G as v,F as j,o as r,h as G}from"./index-CJ_PivE-.js";const R={key:0},U={key:1,class:"text-muted-foreground"},M=S({__name:"ListCurrency",props:{modelValue:{},placeholder:{default:"SÃ©lectionner une devise"},name:{}},emits:["update:modelValue"],setup(V,{emit:h}){const t=V,A=h,{data:y,loading:k,error:_,fetchData:b}=E($.GET_CURRENCIES),u=m(()=>{const e=y.value;if(!e)return[];if(Array.isArray(e))return e;if(Array.isArray(e==null?void 0:e.currencies))return e.currencies;if(Array.isArray(e==null?void 0:e.data))return e.data;if(e&&typeof e=="object"){const a=Object.values(e).filter(l=>l&&typeof l=="object"&&"id"in l);if(a.length>0)return a}return[]});w(()=>{y.value&&(console.log("Currencies data:",y.value),console.log("Normalized currencies:",u.value)),_.value&&console.error("Currency API error:",_.value)});const x=m(()=>t.modelValue===null||t.modelValue===void 0||t.modelValue===""?"":t.modelValue.toString()),C=m(()=>{if(!t.modelValue||t.modelValue===""||t.modelValue==="null")return null;const e=Number(t.modelValue),a=u.value.find(l=>l.id===e);return a?`${a.code||"N/A"} - ${a.name}`:`ID: ${t.modelValue}`});m(()=>{if(!t.modelValue||t.modelValue==="")return null;const e=Number(t.modelValue);return u.value.find(a=>a.id===e)||null});function N(e){if(console.log("ListCurrency - updateValue called with:",e),e==="null"||e==="loading"||e==="error"||e==="empty"){console.log("ListCurrency - Setting empty value"),A("update:modelValue","");return}const a=(e==null?void 0:e.toString())||"";console.log("ListCurrency - Emitting new value:",a),A("update:modelValue",a)}return D(()=>{b()}),(e,a)=>(r(),s(n(I),{"model-value":x.value,"onUpdate:modelValue":N},{default:o(()=>[f(n(B),null,{default:o(()=>[f(n(L),{placeholder:V.placeholder},{default:o(()=>[C.value?(r(),d("span",R,p(C.value),1)):(r(),d("span",U,p(V.placeholder),1))]),_:1},8,["placeholder"])]),_:1}),f(n(T),null,{default:o(()=>[n(k)?(r(),s(n(i),{key:0,value:"loading",disabled:""},{default:o(()=>[...a[0]||(a[0]=[g("div",{class:"flex items-center gap-2"},[g("span",{class:"iconify hugeicons--loading-03 animate-spin"}),c(" Chargement... ")],-1)])]),_:1})):n(_)?(r(),s(n(i),{key:1,value:"error",disabled:""},{default:o(()=>[...a[1]||(a[1]=[g("div",{class:"flex items-center gap-2 text-red-500"},[g("span",{class:"iconify hugeicons--alert-circle"}),c(" Erreur de chargement ")],-1)])]),_:1})):u.value.length===0?(r(),s(n(i),{key:2,value:"empty",disabled:""},{default:o(()=>[...a[2]||(a[2]=[c(" Aucune devise disponible ",-1)])]),_:1})):(r(),d(v,{key:3},[f(n(i),{value:"null"},{default:o(()=>[...a[3]||(a[3]=[c("Aucune devise",-1)])]),_:1}),(r(!0),d(v,null,j(u.value,l=>(r(),d(v,{key:(l==null?void 0:l.id)||Math.random()},[l&&l.id&&l.name?(r(),s(n(i),{key:0,value:String(l.id)},{default:o(()=>[c(p(l.code||"N/A")+" - "+p(l.name),1)]),_:2},1032,["value"])):G("",!0)],64))),128))],64))]),_:1})]),_:1},8,["model-value"]))}});export{M as _};
