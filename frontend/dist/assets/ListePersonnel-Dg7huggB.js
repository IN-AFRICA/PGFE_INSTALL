import{d as O,A as P,r as V,v as U,q as k,p as S,x as y,w as t,f as o,b as i,c as N,h as T,i as s,k as A,$ as M,y as r,G as j,F as q,o as c,t as f}from"./index-CJ_PivE-.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-B9adgRZV.js";import{_ as H,a as J,b as C,c as d,d as K,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-cS4zBTGx.js";import{_ as D}from"./Checkbox.vue_vue_type_script_setup_true_lang-DTckireD.js";import{_ as W}from"./BoxPanelWrapper.vue_vue_type_script_setup_true_lang-CmJ-Iy6y.js";import{_ as X}from"./SaisieRhLayout.vue_vue_type_script_setup_true_lang-CNwSXs2g.js";import{_ as Y}from"./TabPagination.vue_vue_type_script_setup_true_lang-Dsg8W898.js";import{u as E}from"./useGetApi-EdzHoZm6.js";import{e as Z}from"./eventBus-CGRXT3Tn.js";import"./index-BpkKmY4O.js";import"./RovingFocusGroup-BxePylpC.js";import"./DashPageHeader.vue_vue_type_script_setup_true_lang-DucYyTAx.js";import"./DashLayout.vue_vue_type_script_setup_true_lang-Ch2egXHm.js";import"./RightDashHeader.vue_vue_type_script_setup_true_lang-Bn3G870_.js";const I={class:"flex sm:items-center gap-3 flex-col sm:flex-row sm:justify-between"},ee={class:"relative flex-1"},le={class:"flex flex-wrap items-center sm:justify-end gap-2.5 flex-1"},se={key:0,class:"mt-4 p-8 text-center bg-white rounded-md"},te={key:1,class:"mt-4 p-8 text-center bg-white rounded-md"},oe={class:"flex flex-col items-center gap-2 text-red-600"},ne={key:2,class:"mt-4 rounded-md overflow-hidden flex flex-1 bg-white"},ae={class:"flex items-center gap-2 w-max"},he=O({__name:"ListePersonnel",setup(re){const{data:_,loading:$,error:w,fetchData:h}=E(P.GET_PERSONNELS_ACADEMIQUES),{data:p,fetchData:L}=E(P.GET_FONCTIONS),{data:g,fetchData:R}=E(P.GET_ACADEMIC_LEVELS),b=V(1),x=V(15);U(()=>{h(),L(),R()}),Z.on("personalUpdated",()=>{h()}),k(_,l=>{l&&l.length>0&&(console.log("ðŸ” Premier Ã©lÃ©ment du personnel:",l[0]),console.log("ðŸ“Š Structure complÃ¨te:",l))},{immediate:!0}),k(p,l=>{l&&(console.log("ðŸ”§ Fonctions chargÃ©es:",l),l.length>0&&console.log("ðŸ”§ PremiÃ¨re fonction:",l[0]))},{immediate:!0}),k(g,l=>{l&&(console.log("ðŸŽ“ Niveaux scolaires chargÃ©s:",l),l.length>0&&console.log("ðŸŽ“ Premier niveau:",l[0]))},{immediate:!0});const z=S(()=>{var l;return((l=_.value)==null?void 0:l.length)||0}),F=S(()=>{if(!_.value)return[];const l=(b.value-1)*x.value,e=l+x.value;return _.value.slice(l,e)}),B=l=>{var v;if(console.log("ðŸ” getFonctionName appelÃ©e avec ID:",l),console.log("ðŸ” fonctionsData.value:",p.value),!l)return console.log("âš ï¸ Pas de fonction_id"),"N/A";if(!p.value)return console.log("âš ï¸ fonctionsData.value est undefined/null"),"N/A";const e=Array.isArray(p.value)?p.value:((v=p.value)==null?void 0:v.data)||[];console.log("ðŸ” Recherche dans fonctions:",e),console.log("ðŸ” Type de fonctionId:",typeof l,"Valeur:",l);const n=e.find(m=>(console.log("ðŸ” Comparaison:",m.id,"===",l,"?",m.id==l),m.id==l));if(console.log("ðŸ” Fonction trouvÃ©e:",n),!n)return console.log("âš ï¸ Fonction non trouvÃ©e pour ID:",l),"N/A";const a=(n==null?void 0:n.name)||(n==null?void 0:n.title)||(n==null?void 0:n.libelle)||"N/A";return console.log("âœ… Nom de fonction retournÃ©:",a),a},G=l=>{var v;if(console.log("ðŸ” getAcademicLevelName appelÃ©e avec ID:",l),console.log("ðŸ” academicLevelsData.value:",g.value),!l)return console.log("âš ï¸ Pas de academic_level_id"),"N/A";if(!g.value)return console.log("âš ï¸ academicLevelsData.value est undefined/null"),"N/A";const e=Array.isArray(g.value)?g.value:((v=g.value)==null?void 0:v.data)||[];console.log("ðŸ” Recherche dans levels:",e),console.log("ðŸ” Type de academicLevelId:",typeof l,"Valeur:",l);const n=e.find(m=>(console.log("ðŸ” Comparaison:",m.id,"===",l,"?",m.id==l),m.id==l));if(console.log("ðŸ” Level trouvÃ©:",n),!n)return console.log("âš ï¸ Niveau scolaire non trouvÃ© pour ID:",l),"N/A";const a=(n==null?void 0:n.name)||(n==null?void 0:n.title)||(n==null?void 0:n.libelle)||"N/A";return console.log("âœ… Nom de niveau scolaire retournÃ©:",a),a};return(l,e)=>{const n=M("RouterLink");return c(),y(X,{activeBread:"Personnel","active-tag-name":"personnel",group:"saisie"},{default:t(()=>[o(W,null,{default:t(()=>[i("div",I,[i("div",ee,[o(s(Q),{type:"text",id:"search",name:"search",placeholder:"Rechercher un personnel...",class:"w-full max-w-sm ps-10 border border-gray-200/40 bg-white transition-all h-10 rounded-md"}),e[2]||(e[2]=i("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground-muted/70"},[i("span",{class:"flex iconify hugeicons--search-01 text-sm"})],-1))]),i("div",le,[o(s(A),{size:"md",class:"rounded-md max-sm:flex-1 sm:w-max","as-child":""},{default:t(()=>[o(n,{to:"/rh/saisie/personnel/nouveau"},{default:t(()=>[...e[3]||(e[3]=[i("span",{class:"flex iconify hugeicons--plus-sign"},null,-1),i("span",{class:"hidden sm:flex"},"Nouveau Personnel",-1)])]),_:1})]),_:1})])]),s($)?(c(),N("div",se,[...e[4]||(e[4]=[i("div",{class:"flex items-center justify-center gap-2"},[i("span",{class:"iconify hugeicons--loading-03 animate-spin text-2xl"}),i("span",null,"Chargement des donnÃ©es...")],-1)])])):s(w)?(c(),N("div",te,[i("div",oe,[e[6]||(e[6]=i("span",{class:"iconify hugeicons--alert-circle text-3xl"},null,-1)),e[7]||(e[7]=i("span",null,"Erreur lors du chargement des donnÃ©es",-1)),o(s(A),{onClick:s(h),variant:"outline",size:"sm",class:"mt-2"},{default:t(()=>[...e[5]||(e[5]=[r(" RÃ©essayer ",-1)])]),_:1},8,["onClick"])])])):(c(),N("div",ne,[o(s(H),{class:"rounded-md bg-white"},{default:t(()=>[o(s(J),null,{default:t(()=>[o(s(C),null,{default:t(()=>[o(s(d),{class:"w-[20px]"},{default:t(()=>[o(s(D),{class:"bg-white scale-70"})]),_:1}),o(s(d),null,{default:t(()=>[...e[8]||(e[8]=[r("Matricule",-1)])]),_:1}),o(s(d),null,{default:t(()=>[...e[9]||(e[9]=[r("Nom complet",-1)])]),_:1}),o(s(d),null,{default:t(()=>[...e[10]||(e[10]=[r("Sexe",-1)])]),_:1}),o(s(d),null,{default:t(()=>[...e[11]||(e[11]=[r("TÃ©lÃ©phone",-1)])]),_:1}),o(s(d),null,{default:t(()=>[...e[12]||(e[12]=[r("Ã‰tat civil",-1)])]),_:1}),o(s(d),null,{default:t(()=>[...e[13]||(e[13]=[r("Fonction",-1)])]),_:1}),o(s(d),null,{default:t(()=>[...e[14]||(e[14]=[r("Niveau d'Ã©tudes",-1)])]),_:1}),o(s(d),null,{default:t(()=>[...e[15]||(e[15]=[r(" OpÃ©rations ",-1)])]),_:1})]),_:1})]),_:1}),o(s(K),null,{default:t(()=>[F.value.length?T("",!0):(c(),y(s(C),{key:0},{default:t(()=>[o(s(u),{colspan:"11",class:"text-center py-8 text-gray-500"},{default:t(()=>[...e[16]||(e[16]=[r(" Aucun personnel trouvÃ© ",-1)])]),_:1})]),_:1})),(c(!0),N(j,null,q(F.value,a=>(c(),y(s(C),{key:a.id},{default:t(()=>[o(s(u),{class:"w-[40px]"},{default:t(()=>[o(s(D),{class:"bg-white scale-70"})]),_:1}),o(s(u),null,{default:t(()=>[r(f(a.matricule),1)]),_:2},1024),o(s(u),null,{default:t(()=>[r(f(a.firstname)+" "+f(a.name),1)]),_:2},1024),o(s(u),null,{default:t(()=>[r(f(a.gender),1)]),_:2},1024),o(s(u),null,{default:t(()=>[r(f(a.phone_number),1)]),_:2},1024),o(s(u),null,{default:t(()=>[r(f(a.civil_status),1)]),_:2},1024),o(s(u),null,{default:t(()=>[r(f(B(a.fonction_id)),1)]),_:2},1024),o(s(u),null,{default:t(()=>[r(f(G(a.academic_level_id)),1)]),_:2},1024),o(s(u),null,{default:t(()=>[i("div",ae,[o(s(A),{variant:"outline",size:"icon",class:"size-8"},{default:t(()=>[...e[17]||(e[17]=[i("span",{class:"iconify hugeicons--edit-02"},null,-1)])]),_:1}),o(s(A),{variant:"destructive",size:"icon",class:"size-8"},{default:t(()=>[...e[18]||(e[18]=[i("span",{class:"iconify hugeicons--delete-02"},null,-1)])]),_:1})])]),_:1})]),_:2},1024))),128))]),_:1})]),_:1})])),!s($)&&!s(w)?(c(),y(Y,{key:3,modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),perPage:x.value,totalItems:z.value,"onUpdate:perPage":e[1]||(e[1]=a=>x.value=a)},null,8,["modelValue","perPage","totalItems"])):T("",!0)]),_:1})]),_:1})}}});export{he as default};
