import{d as ce,r as N,A as C,s as x,x as R,i as s,K as ve,w as r,f as t,k as z,b as n,L as ye,M as Ee,N as we,y as p,O as he,g as Ce,c as A,h as X,z as O,j as Z,t as M,P as Se,o as v,m as ee,n as ke,p as q,q as $e,v as De,a3 as Pe,B as se,C as te,D as ae,E as re,J as $,F as Te,G as je,H as oe}from"./index-CJ_PivE-.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-B9adgRZV.js";import{_ as Ae,a as Ue,b as I,c as F,d as Ne,e as j}from"./TableHeader.vue_vue_type_script_setup_true_lang-cS4zBTGx.js";import{_ as le}from"./Checkbox.vue_vue_type_script_setup_true_lang-DTckireD.js";import{_ as Ve,a as Fe,b as Re}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-DzZWQSaq.js";import{_ as Le}from"./SelectGroup.vue_vue_type_script_setup_true_lang-CwIOzTi6.js";import{_ as h}from"./index-BeOV968Y.js";import{_ as ze}from"./LayoutSaisieOperation.vue_vue_type_script_setup_true_lang-bYPLg6Nt.js";import{_ as Oe,a as Me,b as Be,c as ne}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DN4DQrTt.js";import{_ as Je}from"./BoxPanelWrapper.vue_vue_type_script_setup_true_lang-CmJ-Iy6y.js";import{u as ie}from"./useGetApi-EdzHoZm6.js";import{u as qe}from"./usePutApi-BrTvEW5v.js";import{_ as pe}from"./ListClassRoom.vue_vue_type_script_setup_true_lang-crHdkUu0.js";import{_ as Ie}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-Bm461x8Q.js";import{u as Xe}from"./usePostApi-Crg8MURP.js";import{e as L}from"./eventBus-CGRXT3Tn.js";import{_ as Ge}from"./IconifySpinner.vue_vue_type_script_setup_true_lang-C3Td1B5O.js";import{u as He,a as de,t as Ke}from"./vee-validate-zod-Bra4yLtR.js";import{z as K}from"./external-CYeExkxg.js";import{_ as Qe}from"./FilterBadges.vue_vue_type_script_setup_true_lang-CBuiPNtr.js";import"./index-BpkKmY4O.js";import"./RovingFocusGroup-BxePylpC.js";import"./DashLayoutWithMode.vue_vue_type_script_setup_true_lang-DzpyZ4TL.js";import"./RightDashHeader.vue_vue_type_script_setup_true_lang-Bn3G870_.js";import"./DashPageHeader.vue_vue_type_script_setup_true_lang-DucYyTAx.js";const We={class:"grid gap-4 py-4"},Ye={class:"flex flex-col space-y-1.5"},Ze={class:"space-y-1.5"},es={key:0,class:"text-xs text-red-500"},ss={class:"flex flex-col space-y-1.5"},ts={key:0,class:"text-xs text-red-500"},as={key:0,class:"flex items-center gap-2"},rs={key:1,class:"flex items-center gap-2"},os=ce({__name:"NewPresenceList",setup(W){const{loading:o,error:b,response:f,postData:_,success:y}=Xe(),g=N(!1),i=K.object({classroom_id:K.number().min(1,"la classe est réquise"),date:K.string().min(1,"la date est réquise")}),{handleSubmit:w,resetForm:d}=He({validationSchema:Ke(i),initialValues:{date:new Date().toISOString().split("T")[0]}}),{value:m,errorMessage:S}=de("classroom_id"),{value:D,errorMessage:P}=de("date"),k=w(async T=>{var c;if(await _(C.CREATE_STUDENT_PRESENCE,T),b.value){x({message:b.value,type:"error"});return}else y.value&&(x({message:((c=f.value)==null?void 0:c.message)||"Présence créée avec succès",type:"success"}),L.emit("presenceCreated",{classroom_id:T.classroom_id,date:T.date}),d(),g.value=!1)});return(T,c)=>(v(),R(s(ve),{open:g.value,"onUpdate:open":c[4]||(c[4]=E=>g.value=E)},{default:r(()=>[t(s(Ie),{"as-child":""},{default:r(()=>[t(s(z),{size:"md",class:"rounded-md"},{default:r(()=>[...c[5]||(c[5]=[n("span",{class:"iconify hugeicons--plus-sign"},null,-1),n("span",{class:"hidden sm:flex"}," Nouvelle presence ",-1)])]),_:1})]),_:1}),t(s(ye),{class:"sm:max-w-[540px]"},{default:r(()=>[t(s(Ee),null,{default:r(()=>[t(s(we),null,{default:r(()=>[...c[6]||(c[6]=[p("Nouvelle presence",-1)])]),_:1}),t(s(he),null,{default:r(()=>[...c[7]||(c[7]=[p(" Enregistrer une nouvelle presence ",-1)])]),_:1})]),_:1}),n("form",{onSubmit:c[3]||(c[3]=Ce((...E)=>s(k)&&s(k)(...E),["prevent"]))},[n("div",We,[n("div",Ye,[t(s(O),{class:"text-foreground-muted font-light",for:"classroom"},{default:r(()=>[...c[8]||(c[8]=[p("Classe",-1)])]),_:1}),n("div",Ze,[t(pe,{modelValue:s(m),"onUpdate:modelValue":c[0]||(c[0]=E=>Z(m)?m.value=E:null)},null,8,["modelValue"])]),s(S)?(v(),A("span",es,M(s(S)),1)):X("",!0)]),n("div",ss,[t(s(O),{class:"text-foreground-muted font-light",for:"date"},{default:r(()=>[...c[9]||(c[9]=[p("Date",-1)])]),_:1}),t(s(Q),{id:"date",type:"date",class:"h-10 bg-white",modelValue:s(D),"onUpdate:modelValue":c[1]||(c[1]=E=>Z(D)?D.value=E:null)},null,8,["modelValue"]),s(P)?(v(),A("span",ts,M(s(P)),1)):X("",!0)])]),t(s(Se),{class:"flex justify-end gap-2 items-center"},{default:r(()=>[t(s(z),{onClick:c[2]||(c[2]=E=>g.value=!1),size:"sm",class:"h-9",variant:"outline"},{default:r(()=>[...c[10]||(c[10]=[n("span",{class:"iconify flex hugeicons--cancel-01 mr-1"},null,-1),p(" Annuler ",-1)])]),_:1}),t(s(z),{size:"sm",class:"h-9",type:"submit",disabled:s(o)},{default:r(()=>[s(o)?(v(),A("span",rs,[t(Ge,{size:"lg"}),c[12]||(c[12]=n("span",null,"Enregistrement en cours...",-1))])):(v(),A("span",as,[...c[11]||(c[11]=[n("span",{class:"iconify hugeicons--floppy-disk mr-1"},null,-1),n("span",null,"Enregistrer",-1)])]))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]))}});class ue{static async exportStudentPresence(o){var b,f,_,y,g,i,w;try{const d=new URLSearchParams;o!=null&&o.date&&d.append("date",o.date),o!=null&&o.classroom_id&&d.append("classroom_id",o.classroom_id),o!=null&&o.idClasse&&d.append("idClasse",o.idClasse),o!=null&&o.status&&d.append("status",o.status),o!=null&&o.school_id&&d.append("school_id",o.school_id);const m=d.toString(),S=m?`${C.EXPORT_STUDENT_PRESENCE_PDF}?${m}`:C.EXPORT_STUDENT_PRESENCE_PDF;return(await ee.get(S,{responseType:"blob",headers:{Accept:"application/pdf"}})).data}catch(d){console.error("Erreur lors de l'export PDF:",d),console.error("Status:",(b=d.response)==null?void 0:b.status),console.error("Data:",(f=d.response)==null?void 0:f.data);let m=`Erreur ${((_=d.response)==null?void 0:_.status)||"réseau"} lors de l'export PDF`;throw((y=d.response)==null?void 0:y.status)===401?m="Erreur d'authentification - Veuillez vous reconnecter":((g=d.response)==null?void 0:g.status)===403?m="Accès refusé pour l'export PDF":((i=d.response)==null?void 0:i.status)===404?m="Aucune donnée trouvée pour l'export PDF":((w=d.response)==null?void 0:w.status)===500&&(m="Erreur serveur lors de l'export PDF"),new Error(m)}}static async exportStudentPresenceExcel(o){var b,f,_,y,g,i,w;try{const d=new URLSearchParams;o!=null&&o.date&&d.append("date",o.date),o!=null&&o.classroom_id&&d.append("classroom_id",o.classroom_id),o!=null&&o.idClasse&&d.append("idClasse",o.idClasse),o!=null&&o.status&&d.append("status",o.status),o!=null&&o.school_id&&d.append("school_id",o.school_id);const m=d.toString(),S=m?`${C.EXPORT_STUDENT_PRESENCE_EXCEL}?${m}`:C.EXPORT_STUDENT_PRESENCE_EXCEL;return(await ee.get(S,{responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}})).data}catch(d){console.error("Erreur lors de l'export Excel:",d),console.error("Status:",(b=d.response)==null?void 0:b.status),console.error("Data:",(f=d.response)==null?void 0:f.data);let m=`Erreur ${((_=d.response)==null?void 0:_.status)||"réseau"} lors de l'export Excel`;throw((y=d.response)==null?void 0:y.status)===401?m="Erreur d'authentification - Veuillez vous reconnecter":((g=d.response)==null?void 0:g.status)===403?m="Accès refusé pour l'export Excel":((i=d.response)==null?void 0:i.status)===404?m="Aucune donnée trouvée pour l'export Excel":((w=d.response)==null?void 0:w.status)===500&&(m="Erreur serveur lors de l'export Excel"),new Error(m)}}static downloadBlob(o,b){const f=window.URL.createObjectURL(o),_=document.createElement("a");_.href=f,_.download=b,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(f)}static async exportAndDownloadPdf(o,b){try{const f=await this.exportStudentPresence(o),_=b||`presences-etudiantes-${new Date().toISOString().split("T")[0]}.pdf`;this.downloadBlob(f,_)}catch(f){throw console.error("Erreur lors de l'export et téléchargement PDF:",f),f}}static async exportAndDownloadExcel(o,b){try{const f=await this.exportStudentPresenceExcel(o),_=b||`presences-etudiantes-${new Date().toISOString().split("T")[0]}.xlsx`;this.downloadBlob(f,_)}catch(f){throw console.error("Erreur lors de l'export et téléchargement Excel:",f),f}}}const ls={class:"flex items-center gap-3 justify-between"},ns={class:"flex flex-1 items-center gap-2"},is={class:"relative w-full max-w-xs"},ds={class:"grid gap-4"},us={class:"flex flex-col gap-3.5"},cs={class:"space-y-1.5"},ps={class:"space-y-1.5"},fs={class:"space-y-1.5"},ms={class:"flex items-center gap-2"},_s={class:"flex items-center gap-2"},bs={class:"flex items-center gap-2"},gs={class:"flex items-center gap-2"},xs={class:"flex flex-wrap items-center gap-2.5"},vs={class:"mt-4 rounded-md overflow-hidden flex flex-1 bg-white"},ys={class:"flex items-center gap-2"},Es={class:"relative inline-flex items-center cursor-pointer group"},ws=["checked","onChange","disabled"],hs={key:0,class:"absolute right-[-24px]"},Cs={class:"flex items-center gap-2"},Ss={class:"flex items-center gap-2"},ks={class:"flex items-center gap-2"},$s={class:"flex items-center gap-2"},Ds={class:"flex items-center gap-2"},Ps={key:0},st=ce({__name:"StudentsPresence",setup(W){const o=N(null),b=N(null),f=N(""),{error:_,response:y,putData:g}=qe(),i=ke({idClasse:void 0,status:void 0,date:null}),{data:w,fetchData:d}=ie(C.GET_CLASSROOMS);d();const m=q(()=>({idClasse:w.value||[]})),S={idClasse:(l,e)=>{const a=e==null?void 0:e.find(u=>u.id===l);return a?a.name:l},status:l=>({present:"Présent",absent:"Absent Non Justifié",absent_justified:"Absent Justifié",sick:"Malade"})[l]||l,date:l=>new Date(l).toLocaleDateString("fr-FR")},D=l=>{l==="idClasse"&&(i.idClasse=void 0),l==="status"&&(i.status=void 0),l==="date"&&(i.date=null)},P=q(()=>{const l={};return i.idClasse&&(l.classroom_id=i.idClasse),i.date&&(l.date=i.date),i.status&&(l.status=i.status),l}),{data:k,fetchData:T,loading:c}=ie(C.GET_STUDENT_PRESENCE),E=q(()=>{if(!k.value)return[];if(!f.value.trim())return k.value;const l=f.value.toLowerCase();return k.value.filter(e=>{var a,u;return((a=e.student)==null?void 0:a.toLowerCase().includes(l))||((u=e.classroom)==null?void 0:u.toLowerCase().includes(l))})}),G=q(()=>E.value.map(l=>{const e=me(l),a=_e(e);return{...l,_status:e,_statusConfig:a}}));$e([()=>i.idClasse,()=>i.date,()=>i.status],async()=>{console.log("Filter params changed, fetching with params:",P.value),i.idClasse&&(console.log("Début du fetch avec params:",P.value),await T(P.value),console.log("Fetch terminé"))},{immediate:!1});const fe=async(l,e)=>{var V;const a=(V=k.value)==null?void 0:V.find(H=>H.id===l);if(!a)return;const u={presence:a.presence,absent_justified:a.absent_justified,sick:a.sick};a.presence=e,e&&(a.absent_justified=!1,a.sick=!1),o.value=l;const U=C.UPDATE_STUDENT_PRESENCE.replace(":id",String(l));await g(U,{presence:a.presence,absent_justified:a.absent_justified,sick:a.sick}),o.value=null,_.value?(a.presence=u.presence,a.absent_justified=u.absent_justified,a.sick=u.sick,x({message:_.value,type:"error"})):y.value&&(x({message:"Présence mise à jour",type:"success"}),b.value=l,setTimeout(()=>{b.value=null},1e3))},me=l=>l.sick?"sick":l.absent_justified?"absent_justified":l.presence?"present":"absent",_e=l=>{const e={present:{label:"Présent",color:"bg-green-100 text-green-800 border-green-200"},absent:{label:"Absent Non Justifié",color:"bg-red-100 text-red-800 border-red-200"},absent_justified:{label:"Absent Justifié",color:"bg-orange-100 text-orange-800 border-orange-200"},sick:{label:"Malade",color:"bg-blue-100 text-blue-800 border-blue-200"}};return e[l]||e.absent},be=async(l,e)=>{var V;const a=(V=k.value)==null?void 0:V.find(H=>H.id===l);if(!a)return;const u={presence:a.presence,absent_justified:a.absent_justified,sick:a.sick};switch(e){case"present":a.presence=!0,a.absent_justified=!1,a.sick=!1;break;case"absent":a.presence=!1,a.absent_justified=!1,a.sick=!1;break;case"absent_justified":a.presence=!1,a.absent_justified=!0,a.sick=!1;break;case"sick":a.presence=!1,a.absent_justified=!1,a.sick=!0;break}o.value=l;const U=C.UPDATE_STUDENT_PRESENCE.replace(":id",String(l));await g(U,{presence:a.presence,absent_justified:a.absent_justified,sick:a.sick}),o.value=null,_.value?(a.presence=u.presence,a.absent_justified=u.absent_justified,a.sick=u.sick,x({message:_.value,type:"error"})):y.value&&(x({message:"Présence mise à jour",type:"success"}),b.value=l,setTimeout(()=>{b.value=null},1500))};De(()=>{L.on("presenceUpdated",()=>{i.idClasse&&T(P.value)}),L.on("presenceCreated",l=>{console.log("Présence créée, synchronisation:",l),i.idClasse=l.classroom_id,i.date=l.date})}),Pe(()=>{L.off("presenceUpdated"),L.off("presenceCreated")});const Y=()=>{const l={};return i.idClasse&&(l.classroom_id=i.idClasse),i.date&&(l.date=i.date),i.status&&(l.status=i.status),l},B=N(!1),J=N(!1),ge=async()=>{var l,e,a;if(!B.value){B.value=!0;try{const u=Y();if(!u.classroom_id&&!u.date){(l=x)==null||l({type:"error",message:"Veuillez sélectionner au moins Classe ou Date avant d'exporter."});return}await ue.exportAndDownloadPdf(u),(e=x)==null||e({type:"success",message:"Export PDF démarré"})}catch(u){(a=x)==null||a({type:"error",message:(u==null?void 0:u.message)||"Erreur lors de l'export PDF"})}finally{B.value=!1}}},xe=async()=>{var l,e,a;if(!J.value){J.value=!0;try{const u=Y();if(!u.classroom_id&&!u.date){(l=x)==null||l({type:"error",message:"Veuillez sélectionner au moins Classe ou Date avant d'exporter."});return}await ue.exportAndDownloadExcel(u),(e=x)==null||e({type:"success",message:"Export Excel démarré"})}catch(u){(a=x)==null||a({type:"error",message:(u==null?void 0:u.message)||"Erreur lors de l'export Excel"})}finally{J.value=!1}}};return(l,e)=>(v(),R(ze,{"active-tag-name":"presences",group:"operations",breadcrumb:[{label:"Élèves",href:"/apprenants"},{label:"Opérations",href:"/apprenants/operations"},{label:"Présence",href:"/apprenants/operations/presences"}]},{default:r(()=>[t(Je,null,{default:r(()=>[n("div",ls,[n("div",ns,[n("div",is,[t(s(Q),{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),type:"text",id:"search",name:"search",placeholder:"Rechercher...",class:"w-full max-w-xs ps-10 border border-gray-200/40 bg-white transition-all h-10 rounded-md"},null,8,["modelValue"]),e[4]||(e[4]=n("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-foreground-muted/70"},[n("span",{class:"flex iconify hugeicons--search-01 text-sm"})],-1))]),t(s(Ve),null,{default:r(()=>[t(s(Fe),{"as-child":""},{default:r(()=>[t(s(z),{variant:"ghost",size:"sm",class:"h-10 rounded-md border bg-white"},{default:r(()=>[...e[5]||(e[5]=[n("span",{class:"hidden sm:flex"}," Filtre",-1),n("span",{class:"iconify hugeicons--filter"},"Filtre",-1)])]),_:1})]),_:1}),t(s(Re),{class:"w-80"},{default:r(()=>[n("div",ds,[e[13]||(e[13]=n("div",{class:"space-y-2"},[n("h4",{class:"font-medium leading-none"}," Filtrage ")],-1)),n("div",us,[n("div",cs,[t(s(O),{class:"text-foreground-muted font-light",for:"classe"},{default:r(()=>[...e[6]||(e[6]=[p("Classe",-1)])]),_:1}),t(pe,{modelValue:i.idClasse,"onUpdate:modelValue":e[1]||(e[1]=a=>i.idClasse=a)},null,8,["modelValue"])]),n("div",ps,[t(s(O),{class:"text-foreground-muted font-light",for:"date"},{default:r(()=>[...e[7]||(e[7]=[p("Date",-1)])]),_:1}),t(s(Q),{id:"date",type:"date",class:"h-10 bg-white",modelValue:i.date,"onUpdate:modelValue":e[2]||(e[2]=a=>i.date=a)},null,8,["modelValue"])]),n("div",fs,[t(s(O),{class:"text-foreground-muted font-light",for:"status"},{default:r(()=>[...e[8]||(e[8]=[p("Statut",-1)])]),_:1}),t(s(se),{modelValue:i.status,"onUpdate:modelValue":e[3]||(e[3]=a=>i.status=a)},{default:r(()=>[t(s(te),{class:"h-10 w-full"},{default:r(()=>[t(s(ae),{placeholder:"Sélectionner un statut"})]),_:1}),t(s(re),null,{default:r(()=>[t(s(Le),null,{default:r(()=>[t(s($),{value:"present"},{default:r(()=>[n("div",ms,[t(s(h),{class:"bg-green-100 text-green-800 border-green-200 px-2 py-1 text-xs font-medium border"},{default:r(()=>[...e[9]||(e[9]=[p(" Présent ",-1)])]),_:1})])]),_:1}),t(s($),{value:"absent"},{default:r(()=>[n("div",_s,[t(s(h),{class:"bg-red-100 text-red-800 border-red-200 px-2 py-1 text-xs font-medium border"},{default:r(()=>[...e[10]||(e[10]=[p(" Absent Non Justifié ",-1)])]),_:1})])]),_:1}),t(s($),{value:"absent_justified"},{default:r(()=>[n("div",bs,[t(s(h),{class:"bg-orange-100 text-orange-800 border-orange-200 px-2 py-1 text-xs font-medium border"},{default:r(()=>[...e[11]||(e[11]=[p(" Absent Justifié ",-1)])]),_:1})])]),_:1}),t(s($),{value:"sick"},{default:r(()=>[n("div",gs,[t(s(h),{class:"bg-blue-100 text-blue-800 border-blue-200 px-2 py-1 text-xs font-medium border"},{default:r(()=>[...e[12]||(e[12]=[p(" Malade ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])]),_:1})]),_:1}),t(Qe,{filters:i,"reference-data":m.value,"custom-labels":S,onRemoveFilter:D},null,8,["filters","reference-data"])]),n("div",xs,[t(os),t(s(Oe),null,{default:r(()=>[t(s(Me),{"as-child":""},{default:r(()=>[t(s(z),{variant:"ghost",size:"md",class:"bg-white border border-border rounded-md"},{default:r(()=>[...e[14]||(e[14]=[p(" Exporter ",-1),n("span",{class:"iconify hugeicons--arrow-down-01"},null,-1)])]),_:1})]),_:1}),t(s(Be),null,{default:r(()=>[t(s(ne),{class:"flex items-center",onClick:ge,disabled:B.value},{default:r(()=>[...e[15]||(e[15]=[n("span",{class:"flex mr-1.5 iconify hugeicons--pdf-02"},null,-1),p(" Exporter pdf ",-1)])]),_:1},8,["disabled"]),t(s(ne),{class:"flex items-center",onClick:xe,disabled:J.value},{default:r(()=>[...e[16]||(e[16]=[n("span",{class:"flex mr-1.5 iconify hugeicons--ai-sheets"},null,-1),p(" Exporter Excel ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})])]),n("div",vs,[t(s(Ae),{class:"rounded-md bg-white"},{default:r(()=>[t(s(Ue),null,{default:r(()=>[t(s(I),null,{default:r(()=>[t(s(F),{class:"w-[20px]"},{default:r(()=>[t(s(le),{class:"bg-white scale-70"})]),_:1}),t(s(F),null,{default:r(()=>[...e[17]||(e[17]=[p(" Nom complet ",-1)])]),_:1}),t(s(F),null,{default:r(()=>[...e[18]||(e[18]=[p(" Classe ",-1)])]),_:1}),t(s(F),null,{default:r(()=>[...e[19]||(e[19]=[p(" Présence ",-1)])]),_:1}),t(s(F),null,{default:r(()=>[...e[20]||(e[20]=[p(" Statut ",-1)])]),_:1})]),_:1})]),_:1}),t(s(Ne),null,{default:r(()=>[s(c)?(v(),R(s(I),{key:0},{default:r(()=>[t(s(j),{colspan:"5",class:"text-center py-8"},{default:r(()=>[...e[21]||(e[21]=[n("span",{class:"flex justify-center items-center gap-2"},[n("span",{class:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-gray-400"}),p(" Chargement des présences... ")],-1)])]),_:1})]),_:1})):G.value&&G.value.length>0?(v(!0),A(je,{key:1},Te(G.value,a=>(v(),R(s(I),{key:a.id,class:oe({"bg-primary-50 transition-colors duration-500":b.value===a.id})},{default:r(()=>[t(s(j),{class:"w-[40px]"},{default:r(()=>[t(s(le),{class:"bg-white scale-70"})]),_:1}),t(s(j),null,{default:r(()=>[p(M(a.student),1)]),_:2},1024),t(s(j),null,{default:r(()=>[p(M(a.classroom),1)]),_:2},1024),t(s(j),null,{default:r(()=>[n("div",ys,[n("label",Es,[n("input",{type:"checkbox",checked:!!a.presence,onChange:u=>{var U;return fe(a.id,(U=u.target)==null?void 0:U.checked)},class:"sr-only peer",disabled:o.value===a.id},null,40,ws),e[23]||(e[23]=n("div",{class:"w-10 h-6 bg-gray-200 rounded-full peer-checked:bg-primary transition-colors duration-200 group-hover:ring-2 group-hover:ring-primary-300"},null,-1)),e[24]||(e[24]=n("div",{class:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-200 peer-checked:translate-x-4"},null,-1)),o.value===a.id?(v(),A("span",hs,[...e[22]||(e[22]=[n("span",{class:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-primary-500"},null,-1)])])):X("",!0)])])]),_:2},1024),t(s(j),{class:"text-left max-w-xs"},{default:r(()=>[n("div",Cs,[t(s(se),{"model-value":a._status,"onUpdate:modelValue":u=>be(a.id,u),disabled:o.value===a.id},{default:r(()=>[t(s(te),{class:"w-[200px] h-9"},{default:r(()=>[t(s(ae),null,{default:r(()=>[t(s(h),{class:oe([a._statusConfig.color,"px-2 py-1 text-xs font-medium border"])},{default:r(()=>[p(M(a._statusConfig.label),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024),t(s(re),null,{default:r(()=>[t(s($),{value:"present"},{default:r(()=>[n("div",Ss,[t(s(h),{class:"bg-green-100 text-green-800 border-green-200 px-2 py-1 text-xs font-medium border"},{default:r(()=>[...e[25]||(e[25]=[p(" Présent ",-1)])]),_:1})])]),_:1}),t(s($),{value:"absent"},{default:r(()=>[n("div",ks,[t(s(h),{class:"bg-red-100 text-red-800 border-red-200 px-2 py-1 text-xs font-medium border"},{default:r(()=>[...e[26]||(e[26]=[p(" Absent Non Justifié ",-1)])]),_:1})])]),_:1}),t(s($),{value:"absent_justified"},{default:r(()=>[n("div",$s,[t(s(h),{class:"bg-orange-100 text-orange-800 border-orange-200 px-2 py-1 text-xs font-medium border"},{default:r(()=>[...e[27]||(e[27]=[p(" Absent Justifié ",-1)])]),_:1})])]),_:1}),t(s($),{value:"sick"},{default:r(()=>[n("div",Ds,[t(s(h),{class:"bg-blue-100 text-blue-800 border-blue-200 px-2 py-1 text-xs font-medium border"},{default:r(()=>[...e[28]||(e[28]=[p(" Malade ",-1)])]),_:1})])]),_:1})]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue","disabled"]),o.value===a.id?(v(),A("span",Ps,[...e[29]||(e[29]=[n("span",{class:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-primary-500"},null,-1)])])):X("",!0)])]),_:2},1024)]),_:2},1032,["class"]))),128)):(v(),R(s(I),{key:2},{default:r(()=>[t(s(j),{colspan:"5",class:"text-center py-8 text-gray-500"},{default:r(()=>[...e[30]||(e[30]=[p(" Aucune donnée de présence trouvée pour les critères sélectionnés ",-1)])]),_:1})]),_:1}))]),_:1})]),_:1})])]),_:1})]),_:1}))}});export{st as default};
