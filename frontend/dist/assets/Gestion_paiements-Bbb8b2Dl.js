import{_ as yt}from"./ComptaLayout.vue_vue_type_script_setup_true_lang-Bu3Oqdii.js";import{d as gt,r as w,A as S,p as V,s as b,v as Re,x as c,w as s,f as n,b as r,i as t,h as v,k as q,y as l,t as m,$ as je,c as f,F,G as R,L as vt,M as bt,N as xt,O as ht,a7 as D,a8 as A,z as h,B as j,C as O,H as U,D as G,E as M,J as p,a4 as X,P as kt,K as wt,o as d}from"./index-CJ_PivE-.js";import{_ as Z}from"./Input.vue_vue_type_script_setup_true_lang-B9adgRZV.js";import{_ as Oe}from"./Checkbox.vue_vue_type_script_setup_true_lang-DTckireD.js";import{_ as Et}from"./index-BeOV968Y.js";import{_ as St}from"./Textarea.vue_vue_type_script_setup_true_lang-Bg8QXdyw.js";import{_ as Dt,a as At,b as Q,c as $,d as Ct,e as E}from"./TableHeader.vue_vue_type_script_setup_true_lang-cS4zBTGx.js";import{_ as $t}from"./BoxPanelWrapper.vue_vue_type_script_setup_true_lang-CmJ-Iy6y.js";import{u as T}from"./useGetApi-EdzHoZm6.js";import{_ as Tt}from"./ListCurrency.vue_vue_type_script_setup_true_lang-BPHzT41E.js";import{u as Nt}from"./usePostApi-Crg8MURP.js";import{u as Lt}from"./usePutApi-BrTvEW5v.js";import{u as Pt}from"./useDeleteApi-D2AjqV8w.js";import{o as Ft,s as k,ab as Rt,a4 as ce,aM as N,av as L,u as jt,aQ as x,t as Ot}from"./vee-validate-zod-Bra4yLtR.js";import{e as Y}from"./eventBus-CGRXT3Tn.js";import"./DashPageHeader.vue_vue_type_script_setup_true_lang-DucYyTAx.js";import"./DashLayout.vue_vue_type_script_setup_true_lang-Ch2egXHm.js";import"./RightDashHeader.vue_vue_type_script_setup_true_lang-Bn3G870_.js";import"./index-BpkKmY4O.js";import"./RovingFocusGroup-BxePylpC.js";const Ut={class:"flex items-center gap-3 justify-between mb-4"},Gt={class:"relative flex-1 max-w-md"},Mt={class:"flex items-center gap-2"},zt={class:"border rounded-lg overflow-hidden flex flex-1 bg-white"},Vt={class:"flex items-center justify-center gap-2"},qt={class:"flex items-center justify-center gap-2"},Yt={class:"flex items-center gap-2 w-max"},Bt={class:"grid grid-cols-2 gap-4"},It={class:"space-y-2"},Ht={key:0,class:"text-sm text-red-500 mt-1"},Kt={class:"space-y-2"},Qt={key:0,class:"text-sm text-red-500 mt-1"},Jt={class:"grid grid-cols-2 gap-4"},Wt={class:"space-y-2"},Xt={key:0,class:"text-sm text-red-500 mt-1"},Zt={class:"space-y-2"},ea={key:0,class:"text-sm text-red-500 mt-1"},ta={class:"grid grid-cols-2 gap-4"},aa={class:"space-y-2"},sa={key:0,class:"text-sm text-red-500 mt-1"},na={class:"space-y-2"},la={key:0,class:"text-sm text-red-500 mt-1"},ia={class:"grid grid-cols-2 gap-4"},oa={class:"space-y-2"},ua={key:0,class:"text-sm text-red-500 mt-1"},da={class:"space-y-2"},ra={key:0,class:"text-sm text-red-500 mt-1"},ma={class:"grid grid-cols-2 gap-4"},ca={class:"space-y-2"},fa={key:0,class:"text-sm text-red-500 mt-1"},pa={class:"space-y-2"},_a={key:0,class:"text-sm text-red-500 mt-1"},ya={class:"grid grid-cols-2 gap-4"},ga={class:"space-y-2"},va={key:0,class:"text-sm text-red-500 mt-1"},ba={class:"space-y-2"},xa={key:0,class:"text-sm text-red-500 mt-1"},ha={class:"space-y-2"},ka={key:0,class:"text-sm text-red-500 mt-1"},wa={key:0,class:"iconify hugeicons--loading-03 animate-spin mr-2"},Ba=gt({__name:"Gestion_paiements",setup(Ea){const Ue=Ft({school_id:N([k(),L()]).transform(e=>e===""||e===null||e===void 0?null:typeof e=="string"?e:e.toString()).nullable(),user_id:N([k(),L()]).transform(e=>e===""||e===null||e===void 0?null:typeof e=="number"?e:Number(e)).refine(e=>e!==null&&!isNaN(e),"L'utilisateur est requis"),fee_id:N([k(),L()]).transform(e=>e===""||e===null||e===void 0?null:typeof e=="number"?e:Number(e)).refine(e=>e!==null&&!isNaN(e),"Le frais est requis"),payment_method_id:N([k(),L()]).transform(e=>e===""||e===null||e===void 0?null:typeof e=="number"?e:Number(e)).refine(e=>e!==null&&!isNaN(e),"La mÃ©thode de paiement est requise"),payment_motif_id:N([k(),L()]).transform(e=>e===""||e===null||e===void 0?null:typeof e=="number"?e:Number(e)).refine(e=>e!==null&&!isNaN(e),"Le motif de paiement est requis"),currency_id:N([k(),L()]).transform(e=>e===""||e===null||e===void 0?null:typeof e=="number"?e:Number(e)).refine(e=>e!==null&&!isNaN(e),"La devise est requise"),exchange_rate_id:N([k(),L()]).transform(e=>e===""||e===null||e===void 0?null:typeof e=="number"?e:Number(e)).refine(e=>e!==null&&!isNaN(e),"Le taux de change est requis"),account_type_id:N([k(),L()]).transform(e=>e===""||e===null||e===void 0?null:typeof e=="number"?e:Number(e)).refine(e=>e!==null&&!isNaN(e),"Le type de compte est requis"),amount:ce.number().min(0,"Le montant doit Ãªtre positif"),amount_foreign:ce.number().min(0).optional().nullable(),remaining_amount:ce.number().min(0).optional().nullable(),details:k().optional().nullable(),paid_at:k().optional().nullable(),status:Rt(["pending","confirmed","refunded"]).default("pending"),confirmed_at:k().optional().nullable(),refunded_at:k().optional().nullable()}),B=w("");w([]);const Ge=w(!1),I=w(!1),H=w(null),g=w([]),fe=w("all"),ee=w("all"),te=w("all"),pe=w(""),_e=w(""),{data:_,error:Me,loading:ze,fetchData:C}=T(S.GET_PAYMENTS),{response:J,error:ae,loading:Ve,postData:qe}=Nt(),{response:W,error:se,loading:Ye,putData:Be}=Lt(),{deleting:Ie,deleteItem:ye}=Pt(),{data:ne,loading:He,fetchData:ge}=T(S.GET_PAYMENT_METHODE),{data:le,loading:Ke,fetchData:ve}=T(S.GET_PAYMENT_MOTIFS),{data:ie,loading:Qe,fetchData:be}=T(S.GET_SCHOOL_FEES),{fetchData:xe}=T(S.GET_FEE_TYPES),{data:oe,loading:Je,fetchData:We}=T("/users"),{data:ue,loading:Xe,fetchData:Ze}=T("/exchange-rates"),{data:de,loading:et,fetchData:tt}=T("/account-types"),{handleSubmit:he,resetForm:re,setValues:at}=jt({validationSchema:Ot(Ue)}),P=V(()=>{if(console.log("ðŸ” Gestion_paiements - payments.value:",_.value),console.log("ðŸ” Gestion_paiements - Type de payments.value:",typeof _.value),console.log("ðŸ” Gestion_paiements - Est un tableau?",Array.isArray(_.value)),!_.value)return[];let e=[];Array.isArray(_.value)?(e=_.value,console.log("âœ… Format: Tableau direct")):_.value.data&&Array.isArray(_.value.data)?(e=_.value.data,console.log('âœ… Format: Objet avec propriÃ©tÃ© "data"')):_.value.payments&&Array.isArray(_.value.payments)?(e=_.value.payments,console.log('âœ… Format: Objet avec propriÃ©tÃ© "payments"')):_.value.transactions&&Array.isArray(_.value.transactions)?(e=_.value.transactions,console.log('âœ… Format: Objet avec propriÃ©tÃ© "transactions"')):_.value&&typeof _.value=="object"&&!Array.isArray(_.value)&&(e=Object.values(_.value).filter(y=>y&&typeof y=="object"&&y.id),console.log("âœ… Format: Objet avec IDs comme clÃ©s")),console.log("ðŸ“Š Nombre de paiements extraits:",e.length);const a=e.filter(y=>{var Ae,Ce,$e,Te,Ne,Le,Pe,Fe;const z=B.value.toLowerCase(),u=!B.value||((Ae=y.amount)==null?void 0:Ae.toString().includes(z))||((Ce=y.payment_method)==null?void 0:Ce.toLowerCase().includes(z))||(($e=y.currency)==null?void 0:$e.toLowerCase().includes(z))||((Te=y.status)==null?void 0:Te.toLowerCase().includes(z)),i=fe.value==="all"||y.status===fe.value,o=ee.value==="all"||((Ne=y.currency_id)==null?void 0:Ne.toString())===ee.value||((Le=y.currency)==null?void 0:Le.toLowerCase().includes(ee.value.toLowerCase())),_t=te.value==="all"||((Pe=y.payment_method_id)==null?void 0:Pe.toString())===te.value||((Fe=y.payment_method)==null?void 0:Fe.toLowerCase().includes(te.value.toLowerCase()));let K=!0;return pe.value&&y.paid_at&&(K=K&&new Date(y.paid_at)>=new Date(pe.value)),_e.value&&y.paid_at&&(K=K&&new Date(y.paid_at)<=new Date(_e.value)),u&&i&&o&&_t&&K});return console.log("ðŸ”Ž Nombre de paiements aprÃ¨s filtrage:",a.length),a}),ke=e=>e?new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e):"0.00",st=e=>e?new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",nt=e=>({pending:"En attente",confirmed:"ConfirmÃ©",refunded:"RemboursÃ©"})[e]||e,lt=e=>({pending:"secondary",confirmed:"default",refunded:"destructive"})[e]||"secondary";he(async e=>{try{if(console.log("Soumission du formulaire de paiement:",e),await qe(S.CREATE_PAYMENT,e),console.log("RÃ©ponse de crÃ©ation:",J.value),console.log("Erreur de crÃ©ation:",ae.value),ae.value){b({message:ae.value,type:"error"});return}J.value&&J.value.success?(b({message:J.value.message||"Paiement crÃ©Ã© avec succÃ¨s",type:"success"}),Ge.value=!1,re(),await C(),Y.emit("paymentUpdated")):b({message:"Erreur lors de la crÃ©ation du paiement",type:"error"})}catch(a){console.error("Erreur lors de la soumission:",a),b({message:"Erreur lors de la crÃ©ation du paiement",type:"error"})}});const we=he(async e=>{if(H.value)try{if(console.log("Modification du paiement:",e),await Be(S.UPDATE_PAYMENT(H.value.id),e),console.log("RÃ©ponse de modification:",W.value),console.log("Erreur de modification:",se.value),se.value){b({message:se.value,type:"error"});return}W.value&&W.value.success?(b({message:W.value.message||"Paiement modifiÃ© avec succÃ¨s",type:"success"}),I.value=!1,H.value=null,re(),await C(),Y.emit("paymentUpdated")):b({message:"Erreur lors de la modification du paiement",type:"error"})}catch(a){console.error("Erreur lors de la modification:",a),b({message:"Erreur lors de la modification du paiement",type:"error"})}});Re(async()=>{await C(),await ge(),await ve(),await be(),await xe()});const it=e=>{H.value=e,at({school_id:e.school_id||"",user_id:e.user_id,fee_id:e.fee_id,payment_method_id:e.payment_method_id,payment_motif_id:e.payment_motif_id,currency_id:e.currency_id,exchange_rate_id:e.exchange_rate_id,account_type_id:e.account_type_id,amount:e.amount,amount_foreign:e.amount_foreign,remaining_amount:e.remaining_amount,details:e.details||"",paid_at:e.paid_at||"",status:e.status}),I.value=!0},me=()=>{I.value=!1,H.value=null,re()},ot=async e=>{if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer ce paiement ?"))try{await ye(S.DELETE_PAYMENT(e)),b({message:"Paiement supprimÃ© avec succÃ¨s",type:"success"}),await C(),Y.emit("paymentUpdated")}catch{b({message:"Erreur lors de la suppression du paiement",type:"error"})}},ut=e=>{g.value.includes(e)?g.value=g.value.filter(a=>a!==e):g.value.push(e)},dt=()=>{g.value.length===P.value.length&&P.value.length>0?g.value=[]:g.value=P.value.map(e=>e.id)},rt=async()=>{if(g.value.length===0){b({message:"Aucun paiement sÃ©lectionnÃ©",type:"warning"});return}if(confirm(`ÃŠtes-vous sÃ»r de vouloir supprimer ${g.value.length} paiement(s) ?`))try{for(const e of g.value)await ye(S.DELETE_PAYMENT(e));b({message:`${g.value.length} paiement(s) supprimÃ©(s) avec succÃ¨s`,type:"success"}),g.value=[],await C(),Y.emit("paymentUpdated")}catch{b({message:"Erreur lors de la suppression des paiements",type:"error"})}},mt=e=>e?typeof e=="object"&&e!==null?e.name||e.label||e.code||"-":e:"-",ct=e=>e?typeof e=="object"&&e!==null?e.symbol&&e.code?`${e.symbol} ${e.code}`:e.code||e.name||e.symbol||"-":e:"-",ft=e=>nt(e);V(()=>Ve.value);const Ee=V(()=>Ye.value),Se=V(()=>Ie.value),pt=V(()=>ze.value),De=V(()=>Me.value);return Re(async()=>{await Promise.all([C(),ge(),ve(),be(),xe(),We(),Ze(),tt()])}),Y.on("paymentUpdated",async()=>{await C()}),Y.on("paiementCreated",async()=>{console.log("ðŸ”„ Ã‰vÃ©nement paiementCreated reÃ§u, rafraÃ®chissement des donnÃ©es..."),await C()}),(e,a)=>{const y=je("RouterLink"),z=je("ListSchool");return d(),c(yt,{activeBread:"Paiements","active-tag-name":"paiements",group:"frais"},{default:s(()=>[n($t,null,{default:s(()=>[r("div",Ut,[r("div",Gt,[n(t(Z),{type:"text",modelValue:B.value,"onUpdate:modelValue":a[0]||(a[0]=u=>B.value=u),placeholder:"Rechercher par montant, devise ou date de paiement...",class:"pl-10"},null,8,["modelValue"]),a[3]||(a[3]=r("span",{class:"iconify hugeicons--search-01 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"},null,-1))]),r("div",Mt,[g.value.length>0?(d(),c(t(q),{key:0,variant:"destructive",size:"sm",onClick:rt,disabled:Se.value},{default:s(()=>[a[4]||(a[4]=r("span",{class:"iconify hugeicons--delete-02 mr-2"},null,-1)),l(" Supprimer ("+m(g.value.length)+") ",1)]),_:1},8,["disabled"])):v("",!0),n(y,{to:"/comptabilite/frais/paiements/nouveau"},{default:s(()=>[n(t(q),{size:"md",class:"bg-primary text-primary-foreground"},{default:s(()=>[...a[5]||(a[5]=[r("span",{class:"iconify hugeicons--add-01 mr-2"},null,-1),l(" Nouveau paiement ",-1)])]),_:1})]),_:1})])]),r("div",zt,[n(t(Dt),null,{default:s(()=>[n(t(At),null,{default:s(()=>[n(t(Q),{class:"bg-white"},{default:s(()=>[n(t($),{class:"w-[50px]"},{default:s(()=>[n(t(Oe),{class:"bg-white scale-70",checked:g.value.length===P.value.length&&P.value.length>0,onClick:dt},null,8,["checked"])]),_:1}),n(t($),{class:"w-[140px]"},{default:s(()=>[...a[6]||(a[6]=[l("Montant",-1)])]),_:1}),n(t($),{class:"w-[140px]"},{default:s(()=>[...a[7]||(a[7]=[l("Montant restant",-1)])]),_:1}),n(t($),{class:"w-[100px]"},{default:s(()=>[...a[8]||(a[8]=[l("Devise",-1)])]),_:1}),n(t($),{class:"w-[150px]"},{default:s(()=>[...a[9]||(a[9]=[l("MÃ©thode",-1)])]),_:1}),n(t($),{class:"w-[120px]"},{default:s(()=>[...a[10]||(a[10]=[l("Statut",-1)])]),_:1}),n(t($),{class:"w-[150px]"},{default:s(()=>[...a[11]||(a[11]=[l("Date de paiement",-1)])]),_:1}),n(t($),{class:"w-[120px]"},{default:s(()=>[...a[12]||(a[12]=[l("Actions",-1)])]),_:1})]),_:1})]),_:1}),n(t(Ct),null,{default:s(()=>[pt.value?(d(),c(t(Q),{key:0},{default:s(()=>[n(t(E),{colspan:7,class:"text-center py-8"},{default:s(()=>[...a[13]||(a[13]=[r("div",{class:"flex items-center justify-center gap-2"},[r("span",{class:"iconify hugeicons--loading-03 animate-spin"}),l(" Chargement des paiements... ")],-1)])]),_:1})]),_:1})):De.value?(d(),c(t(Q),{key:1},{default:s(()=>[n(t(E),{colspan:7,class:"text-center py-8 text-red-500"},{default:s(()=>[r("div",Vt,[a[14]||(a[14]=r("span",{class:"iconify hugeicons--alert-circle"},null,-1)),l(" Erreur lors du chargement : "+m(De.value),1)])]),_:1})]),_:1})):P.value.length===0?(d(),c(t(Q),{key:2},{default:s(()=>[n(t(E),{colspan:7,class:"text-center py-8 text-gray-500"},{default:s(()=>[r("div",qt,[a[15]||(a[15]=r("span",{class:"iconify hugeicons--invoice-02"},null,-1)),l(" "+m(B.value?"Aucun paiement trouvÃ© pour cette recherche":"Aucun paiement enregistrÃ©"),1)])]),_:1})]),_:1})):(d(!0),f(R,{key:3},F(P.value,u=>(d(),c(t(Q),{key:u.id},{default:s(()=>[n(t(E),{class:"w-[40px]"},{default:s(()=>[n(t(Oe),{class:"bg-white scale-70",checked:g.value.includes(u.id),onClick:i=>ut(u.id)},null,8,["checked","onClick"])]),_:2},1024),n(t(E),{class:"font-medium"},{default:s(()=>[l(m(ke(u.amount)),1)]),_:2},1024),n(t(E),null,{default:s(()=>[l(m(ke(u.remaining_amount)),1)]),_:2},1024),n(t(E),null,{default:s(()=>[l(m(ct(u.currency)),1)]),_:2},1024),n(t(E),null,{default:s(()=>[l(m(mt(u.payment_method)),1)]),_:2},1024),n(t(E),null,{default:s(()=>[n(t(Et),{variant:lt(u.status)},{default:s(()=>[l(m(ft(u.status)),1)]),_:2},1032,["variant"])]),_:2},1024),n(t(E),null,{default:s(()=>[l(m(st(u.paid_at||void 0)),1)]),_:2},1024),n(t(E),null,{default:s(()=>[r("div",Yt,[n(t(q),{variant:"outline",size:"icon",class:"size-8",onClick:i=>it(u),title:"Modifier le paiement"},{default:s(()=>[...a[16]||(a[16]=[r("span",{class:"iconify hugeicons--edit-02"},null,-1)])]),_:1},8,["onClick"]),n(t(q),{variant:"destructive",size:"icon",class:"size-8",onClick:i=>ot(u.id),title:"Supprimer le paiement",disabled:Se.value},{default:s(()=>[...a[17]||(a[17]=[r("span",{class:"iconify hugeicons--delete-02"},null,-1)])]),_:1},8,["onClick","disabled"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),n(t(wt),{open:I.value,"onUpdate:open":a[2]||(a[2]=u=>I.value=u)},{default:s(()=>[n(t(vt),{class:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",onPointerDownOutside:me,onEscapeKeyDown:me},{default:s(()=>[n(t(bt),null,{default:s(()=>[n(t(xt),null,{default:s(()=>[...a[18]||(a[18]=[l("Modifier le paiement",-1)])]),_:1}),n(t(ht),null,{default:s(()=>[...a[19]||(a[19]=[l(" Modifiez les informations du paiement. ",-1)])]),_:1})]),_:1}),r("form",{onSubmit:a[1]||(a[1]=(...u)=>t(we)&&t(we)(...u)),class:"space-y-4"},[r("div",Bt,[r("div",It,[n(t(x),{name:"school_id"},{default:s(({field:u,errorMessage:i})=>[n(z,D(A(u)),null,16),i?(d(),f("p",Ht,m(i),1)):v("",!0)]),_:1})]),r("div",Kt,[n(t(h),{for:"edit_user_id"},{default:s(()=>[...a[20]||(a[20]=[l("Utilisateur *",-1)])]),_:1}),n(t(x),{name:"user_id"},{default:s(({field:u,errorMessage:i})=>[n(t(j),D(A(u)),{default:s(()=>[n(t(O),{class:U({"border-red-500":i})},{default:s(()=>[n(t(G),{placeholder:"SÃ©lectionner un utilisateur"})]),_:1},8,["class"]),n(t(M),null,{default:s(()=>[t(Je)?(d(),c(t(p),{key:0,value:"loading",disabled:""},{default:s(()=>[...a[21]||(a[21]=[l(" Chargement des utilisateurs... ",-1)])]),_:1})):!t(oe)||t(oe).length===0?(d(),c(t(p),{key:1,value:"empty",disabled:""},{default:s(()=>[...a[22]||(a[22]=[l(" Aucune donnÃ©e disponible ",-1)])]),_:1})):(d(!0),f(R,{key:2},F(t(oe),o=>(d(),c(t(p),{key:o.id||o.name,value:o.id?o.id.toString():"null"},{default:s(()=>[l(m(o.name||o.firstname||`Utilisateur #${o.id}`),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1040),i?(d(),f("p",Qt,m(i),1)):v("",!0)]),_:1})])]),r("div",Jt,[r("div",Wt,[n(t(h),{for:"edit_fee_id"},{default:s(()=>[...a[23]||(a[23]=[l("Frais *",-1)])]),_:1}),n(t(x),{name:"fee_id"},{default:s(({field:u,errorMessage:i})=>[n(t(j),D(A(u)),{default:s(()=>[n(t(O),{class:U({"border-red-500":i})},{default:s(()=>[n(t(G),{placeholder:"SÃ©lectionner un frais"})]),_:1},8,["class"]),n(t(M),null,{default:s(()=>[t(Qe)?(d(),c(t(p),{key:0,value:"loading",disabled:""},{default:s(()=>[...a[24]||(a[24]=[l(" Chargement des frais... ",-1)])]),_:1})):!t(ie)||t(ie).length===0?(d(),c(t(p),{key:1,value:"empty",disabled:""},{default:s(()=>[...a[25]||(a[25]=[l(" Aucune donnÃ©e disponible ",-1)])]),_:1})):(d(!0),f(R,{key:2},F(t(ie),o=>(d(),c(t(p),{key:o.id||o.name,value:o.id?o.id.toString():"null"},{default:s(()=>[l(m(o.name||o.label||`Frais #${o.id}`),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1040),i?(d(),f("p",Xt,m(i),1)):v("",!0)]),_:1})]),r("div",Zt,[n(t(h),{for:"edit_payment_method_id"},{default:s(()=>[...a[26]||(a[26]=[l("MÃ©thode de paiement *",-1)])]),_:1}),n(t(x),{name:"payment_method_id"},{default:s(({field:u,errorMessage:i})=>[n(t(j),D(A(u)),{default:s(()=>[n(t(O),{class:U({"border-red-500":i})},{default:s(()=>[n(t(G),{placeholder:"SÃ©lectionner une mÃ©thode"})]),_:1},8,["class"]),n(t(M),null,{default:s(()=>[t(He)?(d(),c(t(p),{key:0,value:"loading",disabled:""},{default:s(()=>[...a[27]||(a[27]=[l(" Chargement des mÃ©thodes... ",-1)])]),_:1})):!t(ne)||t(ne).length===0?(d(),c(t(p),{key:1,value:"empty",disabled:""},{default:s(()=>[...a[28]||(a[28]=[l(" Aucune donnÃ©e disponible ",-1)])]),_:1})):(d(!0),f(R,{key:2},F(t(ne),o=>(d(),c(t(p),{key:o.id||o.name,value:o.id?o.id.toString():"null"},{default:s(()=>[l(m(o.name||`MÃ©thode #${o.id}`),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1040),i?(d(),f("p",ea,m(i),1)):v("",!0)]),_:1})])]),r("div",ta,[r("div",aa,[n(t(h),{for:"edit_payment_motif_id"},{default:s(()=>[...a[29]||(a[29]=[l("Motif de paiement *",-1)])]),_:1}),n(t(x),{name:"payment_motif_id"},{default:s(({field:u,errorMessage:i})=>[n(t(j),D(A(u)),{default:s(()=>[n(t(O),{class:U({"border-red-500":i})},{default:s(()=>[n(t(G),{placeholder:"SÃ©lectionner un motif"})]),_:1},8,["class"]),n(t(M),null,{default:s(()=>[t(Ke)?(d(),c(t(p),{key:0,value:"loading",disabled:""},{default:s(()=>[...a[30]||(a[30]=[l(" Chargement des motifs... ",-1)])]),_:1})):!t(le)||t(le).length===0?(d(),c(t(p),{key:1,value:"empty",disabled:""},{default:s(()=>[...a[31]||(a[31]=[l(" Aucune donnÃ©e disponible ",-1)])]),_:1})):(d(!0),f(R,{key:2},F(t(le),o=>(d(),c(t(p),{key:o.id||o.name,value:o.id?o.id.toString():"null"},{default:s(()=>[l(m(o.name||o.label||`Motif #${o.id}`),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1040),i?(d(),f("p",sa,m(i),1)):v("",!0)]),_:1})]),r("div",na,[n(t(h),{for:"edit_currency_id"},{default:s(()=>[...a[32]||(a[32]=[l("Devise *",-1)])]),_:1}),n(t(x),{name:"currency_id"},{default:s(({field:u,errorMessage:i})=>[n(Tt,D(A(u)),null,16),i?(d(),f("p",la,m(i),1)):v("",!0)]),_:1})])]),r("div",ia,[r("div",oa,[n(t(h),{for:"edit_exchange_rate_id"},{default:s(()=>[...a[33]||(a[33]=[l("Taux de change *",-1)])]),_:1}),n(t(x),{name:"exchange_rate_id"},{default:s(({field:u,errorMessage:i})=>[n(t(j),D(A(u)),{default:s(()=>[n(t(O),{class:U({"border-red-500":i})},{default:s(()=>[n(t(G),{placeholder:"SÃ©lectionner un taux"})]),_:1},8,["class"]),n(t(M),null,{default:s(()=>[t(Xe)?(d(),c(t(p),{key:0,value:"loading",disabled:""},{default:s(()=>[...a[34]||(a[34]=[l(" Chargement des taux... ",-1)])]),_:1})):!t(ue)||t(ue).length===0?(d(),c(t(p),{key:1,value:"empty",disabled:""},{default:s(()=>[...a[35]||(a[35]=[l(" Aucune donnÃ©e disponible ",-1)])]),_:1})):(d(!0),f(R,{key:2},F(t(ue),o=>(d(),c(t(p),{key:o.id||o.name,value:o.id?o.id.toString():"null"},{default:s(()=>[l(m(o.name||o.label||`Taux #${o.id}`),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1040),i?(d(),f("p",ua,m(i),1)):v("",!0)]),_:1})]),r("div",da,[n(t(h),{for:"edit_account_type_id"},{default:s(()=>[...a[36]||(a[36]=[l("Type de compte *",-1)])]),_:1}),n(t(x),{name:"account_type_id"},{default:s(({field:u,errorMessage:i})=>[n(t(j),D(A(u)),{default:s(()=>[n(t(O),{class:U({"border-red-500":i})},{default:s(()=>[n(t(G),{placeholder:"SÃ©lectionner un type"})]),_:1},8,["class"]),n(t(M),null,{default:s(()=>[t(et)?(d(),c(t(p),{key:0,value:"loading",disabled:""},{default:s(()=>[...a[37]||(a[37]=[l(" Chargement des types... ",-1)])]),_:1})):!t(de)||t(de).length===0?(d(),c(t(p),{key:1,value:"empty",disabled:""},{default:s(()=>[...a[38]||(a[38]=[l(" Aucune donnÃ©e disponible ",-1)])]),_:1})):(d(!0),f(R,{key:2},F(t(de),o=>(d(),c(t(p),{key:o.id||o.name,value:o.id?o.id.toString():"null"},{default:s(()=>[l(m(o.name||o.label||`Type #${o.id}`),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1040),i?(d(),f("p",ra,m(i),1)):v("",!0)]),_:1})])]),r("div",ma,[r("div",ca,[n(t(h),{for:"edit_amount"},{default:s(()=>[...a[39]||(a[39]=[l("Montant *",-1)])]),_:1}),n(t(x),{name:"amount"},{default:s(({field:u,errorMessage:i})=>[n(t(Z),X({id:"edit_amount"},u,{type:"number",step:"0.01",placeholder:"1000.00",class:{"border-red-500":i}}),null,16,["class"]),i?(d(),f("p",fa,m(i),1)):v("",!0)]),_:1})]),r("div",pa,[n(t(h),{for:"edit_remaining_amount"},{default:s(()=>[...a[40]||(a[40]=[l("Montant restant",-1)])]),_:1}),n(t(x),{name:"remaining_amount"},{default:s(({field:u,errorMessage:i})=>[n(t(Z),X({id:"edit_remaining_amount"},u,{type:"number",step:"0.01",placeholder:"0.00",class:{"border-red-500":i}}),null,16,["class"]),i?(d(),f("p",_a,m(i),1)):v("",!0)]),_:1})])]),r("div",ya,[r("div",ga,[n(t(h),{for:"edit_paid_at"},{default:s(()=>[...a[41]||(a[41]=[l("Date de paiement",-1)])]),_:1}),n(t(x),{name:"paid_at"},{default:s(({field:u,errorMessage:i})=>[n(t(Z),X({id:"edit_paid_at"},u,{type:"datetime-local",class:{"border-red-500":i}}),null,16,["class"]),i?(d(),f("p",va,m(i),1)):v("",!0)]),_:1})]),r("div",ba,[n(t(h),{for:"edit_status"},{default:s(()=>[...a[42]||(a[42]=[l("Statut",-1)])]),_:1}),n(t(x),{name:"status"},{default:s(({field:u,errorMessage:i})=>[n(t(j),D(A(u)),{default:s(()=>[n(t(O),{class:U({"border-red-500":i})},{default:s(()=>[n(t(G),{placeholder:"SÃ©lectionner un statut"})]),_:1},8,["class"]),n(t(M),null,{default:s(()=>[n(t(p),{value:"pending"},{default:s(()=>[...a[43]||(a[43]=[l("En attente",-1)])]),_:1}),n(t(p),{value:"confirmed"},{default:s(()=>[...a[44]||(a[44]=[l("ConfirmÃ©",-1)])]),_:1}),n(t(p),{value:"refunded"},{default:s(()=>[...a[45]||(a[45]=[l("RemboursÃ©",-1)])]),_:1})]),_:1})]),_:2},1040),i?(d(),f("p",xa,m(i),1)):v("",!0)]),_:1})])]),r("div",ha,[n(t(h),{for:"edit_details"},{default:s(()=>[...a[46]||(a[46]=[l("DÃ©tails",-1)])]),_:1}),n(t(x),{name:"details"},{default:s(({field:u,errorMessage:i})=>[n(t(St),X({id:"edit_details"},u,{placeholder:"DÃ©tails du paiement...",rows:"3",class:{"border-red-500":i}}),null,16,["class"]),i?(d(),f("p",ka,m(i),1)):v("",!0)]),_:1})]),n(t(kt),null,{default:s(()=>[n(t(q),{type:"button",variant:"outline",onClick:me},{default:s(()=>[...a[47]||(a[47]=[l(" Annuler ",-1)])]),_:1}),n(t(q),{type:"submit",disabled:Ee.value},{default:s(()=>[Ee.value?(d(),f("span",wa)):v("",!0),a[48]||(a[48]=l(" Modifier ",-1))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1})}}});export{Ba as default};
